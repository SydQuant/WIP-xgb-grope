2025-09-12 13:56:55,756 - INFO - ================================================================================
2025-09-12 13:56:55,756 - INFO - XGBoost Comparison Framework
2025-09-12 13:56:55,756 - INFO - ================================================================================
2025-09-12 13:56:55,756 - INFO - Configuration:
2025-09-12 13:56:55,756 - INFO -   Target Symbol: @TY#C
2025-09-12 13:56:55,757 - INFO -   Date Range: 2015-01-01 to 2025-08-01
2025-09-12 13:56:55,757 - INFO -   Models: 150, Type: tiered
2025-09-12 13:56:55,757 - INFO -   Folds: 8
2025-09-12 13:56:55,757 - INFO -   Max Features: 100 (Limited)
2025-09-12 13:56:55,757 - INFO -   Feature Selection: Enabled
2025-09-12 13:56:55,757 - INFO -   Inner Val Fraction: 0.2
2025-09-12 13:56:55,757 - INFO -   EWMA Alpha: 0.1, Quality Halflife: 63 days
2025-09-12 13:56:55,757 - INFO -   Signal Type: Binary (+1/-1)
2025-09-12 13:56:55,757 - INFO -   Cross-validation: Expanding window
2025-09-12 13:56:55,757 - INFO -   Production: Cutoff=0.6, Top N=8, Q-Metric=sharpe
2025-09-12 13:56:55,757 - INFO -   Reselection: Every 1 fold(s)
2025-09-12 13:56:55,757 - INFO - 
2025-09-12 13:57:00,201 - INFO - Loaded: X=(2735, 1906), y=(2735,)
2025-09-12 13:57:19,395 - INFO - Selected 100 features (threshold: 0.7)
2025-09-12 13:57:19,404 - INFO - Selected: 100 features
2025-09-12 13:57:19,578 - INFO - GPU detection: CUDA GPU available and working
2025-09-12 13:57:19,579 - INFO - Processing mode: GPU sequential (GPU: True, Total models: 1200)
2025-09-12 13:57:19,587 - INFO - GPU detection: CUDA GPU available and working
2025-09-12 13:57:19,596 - INFO - Using expanding window
2025-09-12 13:57:19,597 - INFO - Starting analysis: 150 tiered models x 7 folds
2025-09-12 13:57:19,597 - INFO - Processing Fold 1/7
2025-09-12 13:57:19,600 - INFO -   Using GPU sequential processing
2025-09-12 13:58:13,445 - INFO - Fold 1 Summary:
2025-09-12 13:58:13,445 - INFO -   Best OOS Sharpe: M47 (2.288, p=0.010)
2025-09-12 13:58:13,445 - INFO -   Best Q-Sharpe:  M47 (2.288, OOS_Sharpe=2.288, OOS_Hit=0.548)
2025-09-12 13:58:13,445 - INFO -   Mean OOS Sharpe: 0.722, Mean Hit: 0.505
2025-09-12 13:58:13,445 - INFO - 
2025-09-12 13:58:13,448 - INFO - Processing Fold 2/7
2025-09-12 13:58:13,452 - INFO -   Using GPU sequential processing
2025-09-12 13:59:15,885 - INFO - Fold 2 Summary:
2025-09-12 13:59:15,886 - INFO -   Best OOS Sharpe: M120 (2.877, p=0.000)
2025-09-12 13:59:15,886 - INFO -   Best Q-Sharpe:  M47 (2.205, OOS_Sharpe=1.450, OOS_Hit=0.528)
2025-09-12 13:59:15,886 - INFO -   Mean OOS Sharpe: 0.991, Mean Hit: 0.527
2025-09-12 13:59:15,886 - INFO - 
2025-09-12 13:59:15,889 - INFO - Processing Fold 3/7
2025-09-12 13:59:15,892 - INFO -   Using GPU sequential processing
2025-09-12 14:00:23,022 - INFO - Fold 3 Summary:
2025-09-12 14:00:23,022 - INFO -   Best OOS Sharpe: M80 (3.271, p=0.000)
2025-09-12 14:00:23,022 - INFO -   Best Q-Sharpe:  M47 (2.058, OOS_Sharpe=0.742, OOS_Hit=0.501)
2025-09-12 14:00:23,022 - INFO -   Mean OOS Sharpe: 1.540, Mean Hit: 0.530
2025-09-12 14:00:23,022 - INFO - 
2025-09-12 14:00:23,026 - INFO - Processing Fold 4/7
2025-09-12 14:00:23,029 - INFO -   Using GPU sequential processing
2025-09-12 14:01:34,704 - INFO - Fold 4 Summary:
2025-09-12 14:01:34,705 - INFO -   Best OOS Sharpe: M111 (1.657, p=0.060)
2025-09-12 14:01:34,705 - INFO -   Best Q-Sharpe:  M47 (1.927, OOS_Sharpe=0.749, OOS_Hit=0.501)
2025-09-12 14:01:34,705 - INFO -   Mean OOS Sharpe: -0.291, Mean Hit: 0.477
2025-09-12 14:01:34,705 - INFO - 
2025-09-12 14:01:34,708 - INFO - Processing Fold 5/7
2025-09-12 14:01:34,712 - INFO -   Using GPU sequential processing
2025-09-12 14:02:48,489 - INFO - Fold 5 Summary:
2025-09-12 14:02:48,489 - INFO -   Best OOS Sharpe: M53 (1.951, p=0.020)
2025-09-12 14:02:48,489 - INFO -   Best Q-Sharpe:  M47 (1.866, OOS_Sharpe=1.311, OOS_Hit=0.543)
2025-09-12 14:02:48,489 - INFO -   Mean OOS Sharpe: 0.498, Mean Hit: 0.521
2025-09-12 14:02:48,489 - INFO - 
2025-09-12 14:02:48,493 - INFO - Processing Fold 6/7
2025-09-12 14:02:48,496 - INFO -   Using GPU sequential processing
2025-09-12 14:04:04,954 - INFO - Fold 6 Summary:
2025-09-12 14:04:04,954 - INFO -   Best OOS Sharpe: M104 (2.913, p=0.000)
2025-09-12 14:04:04,954 - INFO -   Best Q-Sharpe:  M35 (1.703, OOS_Sharpe=1.480, OOS_Hit=0.566)
2025-09-12 14:04:04,954 - INFO -   Mean OOS Sharpe: 1.164, Mean Hit: 0.544
2025-09-12 14:04:04,954 - INFO - 
2025-09-12 14:04:04,958 - INFO - Processing Fold 7/7
2025-09-12 14:04:04,964 - INFO -   Using GPU sequential processing
2025-09-12 14:05:23,057 - INFO - Fold 7 Summary:
2025-09-12 14:05:23,057 - INFO -   Best OOS Sharpe: M86 (2.985, p=0.000)
2025-09-12 14:05:23,057 - INFO -   Best Q-Sharpe:  M44 (1.682, OOS_Sharpe=2.917, OOS_Hit=0.566)
2025-09-12 14:05:23,058 - INFO -   Mean OOS Sharpe: 1.520, Mean Hit: 0.522
2025-09-12 14:05:23,058 - INFO - 
2025-09-12 14:05:23,062 - INFO - Starting full timeline backtesting...
2025-09-12 14:05:23,062 - INFO - Running full timeline backtest with 7 folds (0-based indexing)
2025-09-12 14:05:23,062 - INFO - Fold 0 skipped (no prior Q-score history for meaningful selection)
2025-09-12 14:05:23,062 - INFO - Effective backtest period: Folds 1-6 (6 folds)
2025-09-12 14:05:23,062 - INFO - Training period: Folds 1-4
2025-09-12 14:05:23,062 - INFO - Production period: Folds 5-6
2025-09-12 14:05:23,062 - INFO - Using consistent OOS methodology for all folds
2025-09-12 14:05:23,062 - INFO - Fold 0: Skipped (no prior Q-score history for meaningful selection)
2025-09-12 14:05:23,062 - INFO - 
--- Processing fold 1/6 ---
2025-09-12 14:05:23,100 - INFO - Fold 1: Q-scores from fold 0: ['M00:1.437', 'M01:1.440', 'M02:2.059', 'M03:0.885', 'M04:0.749']...
2025-09-12 14:05:23,100 - INFO - Fold 1: Selected models [47, 37, 2, 81, 35, 44, 91, 23] based on fold 0 Q-scores, avg Q-score: 1.945
2025-09-12 14:05:23,103 - INFO - Fold 1 (Training): Sharpe=0.758, Hit=51.1%
2025-09-12 14:05:23,103 - INFO - 
--- Processing fold 2/6 ---
2025-09-12 14:05:23,131 - INFO - Fold 2: Q-scores from fold 1: ['M00:1.442', 'M01:1.384', 'M02:1.837', 'M03:0.945', 'M04:0.787']...
2025-09-12 14:05:23,131 - INFO - Fold 2: Selected models [47, 37, 2, 35, 81, 126, 23, 91] based on fold 1 Q-scores, avg Q-score: 1.820
2025-09-12 14:05:23,133 - INFO - Fold 2 (Training): Sharpe=1.576, Hit=52.5%
2025-09-12 14:05:23,133 - INFO - 
--- Processing fold 3/6 ---
2025-09-12 14:05:23,158 - INFO - Fold 3: Q-scores from fold 2: ['M00:1.481', 'M01:1.409', 'M02:1.907', 'M03:0.893', 'M04:0.928']...
2025-09-12 14:05:23,158 - INFO - Fold 3: Selected models [47, 2, 35, 37, 44, 91, 81, 23] based on fold 2 Q-scores, avg Q-score: 1.825
2025-09-12 14:05:23,160 - INFO - Fold 3 (Training): Sharpe=-0.247, Hit=46.9%
2025-09-12 14:05:23,160 - INFO - 
--- Processing fold 4/6 ---
2025-09-12 14:05:23,186 - INFO - Fold 4: Q-scores from fold 3: ['M00:1.300', 'M01:1.153', 'M02:1.617', 'M03:0.874', 'M04:0.817']...
2025-09-12 14:05:23,187 - INFO - Fold 4: Selected models [47, 35, 37, 44, 2, 91, 81, 73] based on fold 3 Q-scores, avg Q-score: 1.641
2025-09-12 14:05:23,188 - INFO - Fold 4 (Training): Sharpe=0.317, Hit=51.9%
2025-09-12 14:05:23,188 - INFO - 
--- Processing fold 5/6 ---
2025-09-12 14:05:23,215 - INFO - Fold 5: Q-scores from fold 4: ['M00:1.241', 'M01:1.097', 'M02:1.432', 'M03:0.853', 'M04:0.752']...
2025-09-12 14:05:23,215 - INFO - Fold 5: Selected models [47, 35, 44, 23, 73, 86, 91, 2] based on fold 4 Q-scores, avg Q-score: 1.555
2025-09-12 14:05:23,216 - INFO - Fold 5 (Production): Sharpe=1.469, Hit=57.0%
2025-09-12 14:05:23,216 - INFO - 
--- Processing fold 6/6 ---
2025-09-12 14:05:23,242 - INFO - Fold 6: Q-scores from fold 5: ['M00:1.234', 'M01:1.115', 'M02:1.441', 'M03:0.695', 'M04:0.826']...
2025-09-12 14:05:23,242 - INFO - Fold 6: Selected models [35, 47, 44, 73, 23, 2, 130, 86] based on fold 5 Q-scores, avg Q-score: 1.525
2025-09-12 14:05:23,243 - INFO - Fold 6 (Production): Sharpe=2.251, Hit=53.8%
2025-09-12 14:05:23,244 - INFO - Training Period Overall: Sharpe=0.621, Hit=50.6%
2025-09-12 14:05:23,245 - INFO - Production Period Overall: Sharpe=1.813, Hit=55.4%
2025-09-12 14:05:23,246 - INFO - Full Timeline Overall: Sharpe=1.091, Hit=52.2%
2025-09-12 14:05:23,246 - INFO - Training: Sharpe=0.621 | Hit=50.6% | Return=2.92%
2025-09-12 14:05:23,246 - INFO - Production: Sharpe=1.813 | Hit=55.4% | Return=11.47%
2025-09-12 14:05:23,246 - INFO - Full Timeline: Sharpe=1.091 | Hit=52.2% | Return=5.79%
2025-09-12 14:05:23,246 - INFO - Generating visualizations...
2025-09-12 14:05:23,246 - INFO - Creating clean visualizations for 150 models...
2025-09-12 14:05:24,627 - INFO - Clean fold-by-fold analysis saved to: 20250912_135655_fold_@TY#C_150models_8folds_retest2_TY_optimal.png
2025-09-12 14:05:26,853 - INFO - Detailed production analysis saved to: 20250912_135655_backtest_@TY#C_150models_8folds_retest2_TY_optimal.png
2025-09-12 14:05:26,853 - INFO - ================================================================================
2025-09-12 14:05:26,853 - INFO - BACKTEST SUMMARY
2025-09-12 14:05:26,853 - INFO - ================================================================================
2025-09-12 14:05:26,853 - INFO - Config: Cutoff=70%, Top N=5, Q-Metric=sharpe, Reselection=1 fold(s)
2025-09-12 14:05:26,853 - INFO - Model Selection History:
2025-09-12 14:05:26,853 - INFO -   Fold 1: M47, M37, M02, M81, M35, M44, M91, M23 (Avg Q-sharpe: 1.945)
2025-09-12 14:05:26,853 - INFO -   Fold 2: M47, M37, M02, M35, M81, M126, M23, M91 (Avg Q-sharpe: 1.820)
2025-09-12 14:05:26,853 - INFO -   Fold 3: M47, M02, M35, M37, M44, M91, M81, M23 (Avg Q-sharpe: 1.825)
2025-09-12 14:05:26,853 - INFO -   Fold 4: M47, M35, M37, M44, M02, M91, M81, M73 (Avg Q-sharpe: 1.641)
2025-09-12 14:05:26,853 - INFO -   Fold 5: M47, M35, M44, M23, M73, M86, M91, M02 (Avg Q-sharpe: 1.555)
2025-09-12 14:05:26,853 - INFO -   Fold 6: M35, M47, M44, M73, M23, M02, M130, M86 (Avg Q-sharpe: 1.525)
2025-09-12 14:05:26,853 - INFO - 
2025-09-12 14:05:26,853 - INFO - Fold-by-Fold Performance:
2025-09-12 14:05:26,853 - INFO -   Fold 1: M47, M37, M02, M81, M35, M44, M91, M23 | Sharpe=0.758 | Hit=51.1% | Samples=341
2025-09-12 14:05:26,853 - INFO -   Fold 2: M47, M37, M02, M35, M81, M126, M23, M91 | Sharpe=1.576 | Hit=52.5% | Samples=341
2025-09-12 14:05:26,853 - INFO -   Fold 3: M47, M02, M35, M37, M44, M91, M81, M23 | Sharpe=-0.247 | Hit=46.9% | Samples=341
2025-09-12 14:05:26,853 - INFO -   Fold 4: M47, M35, M37, M44, M02, M91, M81, M73 | Sharpe=0.317 | Hit=51.9% | Samples=341
2025-09-12 14:05:26,853 - INFO -   Fold 5: M47, M35, M44, M23, M73, M86, M91, M02 | Sharpe=1.469 | Hit=57.0% | Samples=341
2025-09-12 14:05:26,853 - INFO -   Fold 6: M35, M47, M44, M73, M23, M02, M130, M86 | Sharpe=2.251 | Hit=53.8% | Samples=348
2025-09-12 14:05:26,853 - INFO - ================================================================================
2025-09-12 14:05:26,853 - INFO - ================================================================================
2025-09-12 14:05:26,854 - INFO - ANALYSIS COMPLETED SUCCESSFULLY!
2025-09-12 14:05:26,854 - INFO - ================================================================================
2025-09-12 14:05:26,854 - INFO - Generated 2 visualization files
2025-09-12 14:05:26,854 - INFO -   - 20250912_135655_fold_@TY#C_150models_8folds_retest2_TY_optimal.png
2025-09-12 14:05:26,854 - INFO -   - 20250912_135655_backtest_@TY#C_150models_8folds_retest2_TY_optimal.png
2025-09-12 14:05:26,854 - INFO - Training Final: Sharpe=0.621 | Hit=50.6% | Return=2.92% | CB=0.412
2025-09-12 14:05:26,854 - INFO - Production Final: Sharpe=1.813 | Hit=55.4% | Return=11.47% | CB=1.524
2025-09-12 14:05:26,854 - INFO - Full Timeline Final: Sharpe=1.091 | Hit=52.2% | Return=5.79% | CB=0.768
