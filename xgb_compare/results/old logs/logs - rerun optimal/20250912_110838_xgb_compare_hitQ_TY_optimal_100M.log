2025-09-12 11:08:38,786 - INFO - ================================================================================
2025-09-12 11:08:38,787 - INFO - XGBoost Comparison Framework
2025-09-12 11:08:38,787 - INFO - ================================================================================
2025-09-12 11:08:38,787 - INFO - Configuration:
2025-09-12 11:08:38,787 - INFO -   Target Symbol: @TY#C
2025-09-12 11:08:38,787 - INFO -   Date Range: 2015-01-01 to 2025-08-01
2025-09-12 11:08:38,787 - INFO -   Models: 100, Type: tiered
2025-09-12 11:08:38,787 - INFO -   Folds: 10
2025-09-12 11:08:38,787 - INFO -   Max Features: 100 (Limited)
2025-09-12 11:08:38,787 - INFO -   Feature Selection: Enabled
2025-09-12 11:08:38,787 - INFO -   Inner Val Fraction: 0.2
2025-09-12 11:08:38,787 - INFO -   EWMA Alpha: 0.1, Quality Halflife: 63 days
2025-09-12 11:08:38,787 - INFO -   Signal Type: Binary (+1/-1)
2025-09-12 11:08:38,787 - INFO -   Cross-validation: Expanding window
2025-09-12 11:08:38,787 - INFO -   Production: Cutoff=0.6, Top N=5, Q-Metric=hit_rate
2025-09-12 11:08:38,787 - INFO -   Reselection: Every 1 fold(s)
2025-09-12 11:08:38,787 - INFO - 
2025-09-12 11:08:44,670 - INFO - Loaded: X=(2735, 1906), y=(2735,)
2025-09-12 11:09:04,294 - INFO - Selected 100 features (threshold: 0.7)
2025-09-12 11:09:04,306 - INFO - Selected: 100 features
2025-09-12 11:09:04,585 - INFO - GPU detection: CUDA GPU available and working
2025-09-12 11:09:04,595 - INFO - Processing mode: GPU sequential (GPU: True, Total models: 1000)
2025-09-12 11:09:04,635 - INFO - GPU detection: CUDA GPU available and working
2025-09-12 11:09:04,653 - INFO - Using expanding window
2025-09-12 11:09:04,654 - INFO - Starting analysis: 100 tiered models x 9 folds
2025-09-12 11:09:04,654 - INFO - Processing Fold 1/9
2025-09-12 11:09:04,658 - INFO -   Using GPU sequential processing
2025-09-12 11:13:04,659 - INFO - Fold 1 Summary:
2025-09-12 11:13:04,659 - INFO -   Best OOS Sharpe: M88 (1.416, p=0.130)
2025-09-12 11:13:04,659 - INFO -   Best Q-Hit_Rate:  M20 (0.566, OOS_Sharpe=1.082, OOS_Hit=0.566)
2025-09-12 11:13:04,659 - INFO -   Mean OOS Sharpe: -0.213, Mean Hit: 0.509
2025-09-12 11:13:04,659 - INFO - 
2025-09-12 11:13:04,662 - INFO - Processing Fold 2/9
2025-09-12 11:13:04,665 - INFO -   Using GPU sequential processing
2025-09-12 11:18:08,244 - INFO - Fold 2 Summary:
2025-09-12 11:18:08,244 - INFO -   Best OOS Sharpe: M17 (1.602, p=0.090)
2025-09-12 11:18:08,244 - INFO -   Best Q-Hit_Rate:  M20 (0.558, OOS_Sharpe=-0.179, OOS_Hit=0.485)
2025-09-12 11:18:08,244 - INFO -   Mean OOS Sharpe: -0.324, Mean Hit: 0.479
2025-09-12 11:18:08,244 - INFO - 
2025-09-12 11:18:08,247 - INFO - Processing Fold 3/9
2025-09-12 11:18:08,250 - INFO -   Using GPU sequential processing
2025-09-12 11:24:14,762 - INFO - Fold 3 Summary:
2025-09-12 11:24:14,762 - INFO -   Best OOS Sharpe: M20 (1.801, p=0.100)
2025-09-12 11:24:14,762 - INFO -   Best Q-Hit_Rate:  M20 (0.554, OOS_Sharpe=1.801, OOS_Hit=0.522)
2025-09-12 11:24:14,762 - INFO -   Mean OOS Sharpe: 0.278, Mean Hit: 0.492
2025-09-12 11:24:14,763 - INFO - 
2025-09-12 11:24:14,766 - INFO - Processing Fold 4/9
2025-09-12 11:24:14,769 - INFO -   Using GPU sequential processing
2025-09-12 11:30:11,957 - INFO - Fold 4 Summary:
2025-09-12 11:30:11,957 - INFO -   Best OOS Sharpe: M88 (2.061, p=0.050)
2025-09-12 11:30:11,957 - INFO -   Best Q-Hit_Rate:  M20 (0.552, OOS_Sharpe=1.510, OOS_Hit=0.526)
2025-09-12 11:30:11,957 - INFO -   Mean OOS Sharpe: 0.421, Mean Hit: 0.504
2025-09-12 11:30:11,957 - INFO - 
2025-09-12 11:30:11,959 - INFO - Processing Fold 5/9
2025-09-12 11:30:11,963 - INFO -   Using GPU sequential processing
2025-09-12 11:36:20,280 - INFO - Fold 5 Summary:
2025-09-12 11:36:20,280 - INFO -   Best OOS Sharpe: M13 (0.961, p=0.290)
2025-09-12 11:36:20,280 - INFO -   Best Q-Hit_Rate:  M20 (0.544, OOS_Sharpe=-1.362, OOS_Hit=0.471)
2025-09-12 11:36:20,280 - INFO -   Mean OOS Sharpe: -0.769, Mean Hit: 0.482
2025-09-12 11:36:20,280 - INFO - 
2025-09-12 11:36:20,283 - INFO - Processing Fold 6/9
2025-09-12 11:36:20,288 - INFO -   Using GPU sequential processing
2025-09-12 11:42:38,133 - INFO - Fold 6 Summary:
2025-09-12 11:42:38,134 - INFO -   Best OOS Sharpe: M66 (1.228, p=0.180)
2025-09-12 11:42:38,134 - INFO -   Best Q-Hit_Rate:  M88 (0.539, OOS_Sharpe=0.303, OOS_Hit=0.500)
2025-09-12 11:42:38,134 - INFO -   Mean OOS Sharpe: -0.100, Mean Hit: 0.501
2025-09-12 11:42:38,134 - INFO - 
2025-09-12 11:42:38,136 - INFO - Processing Fold 7/9
2025-09-12 11:42:38,140 - INFO -   Using GPU sequential processing
2025-09-12 11:49:09,351 - INFO - Fold 7 Summary:
2025-09-12 11:49:09,351 - INFO -   Best OOS Sharpe: M00 (0.613, p=0.580)
2025-09-12 11:49:09,351 - INFO -   Best Q-Hit_Rate:  M88 (0.534, OOS_Sharpe=-0.160, OOS_Hit=0.485)
2025-09-12 11:49:09,351 - INFO -   Mean OOS Sharpe: -0.975, Mean Hit: 0.486
2025-09-12 11:49:09,351 - INFO - 
2025-09-12 11:49:09,355 - INFO - Processing Fold 8/9
2025-09-12 11:49:09,359 - INFO -   Using GPU sequential processing
2025-09-12 11:55:58,689 - INFO - Fold 8 Summary:
2025-09-12 11:55:58,690 - INFO -   Best OOS Sharpe: M99 (0.880, p=0.370)
2025-09-12 11:55:58,690 - INFO -   Best Q-Hit_Rate:  M88 (0.529, OOS_Sharpe=0.077, OOS_Hit=0.489)
2025-09-12 11:55:58,690 - INFO -   Mean OOS Sharpe: -0.420, Mean Hit: 0.470
2025-09-12 11:55:58,690 - INFO - 
2025-09-12 11:55:58,693 - INFO - Processing Fold 9/9
2025-09-12 11:55:58,698 - INFO -   Using GPU sequential processing
2025-09-12 12:01:24,255 - INFO - Fold 9 Summary:
2025-09-12 12:01:24,255 - INFO -   Best OOS Sharpe: M26 (1.850, p=0.070)
2025-09-12 12:01:24,255 - INFO -   Best Q-Hit_Rate:  M88 (0.528, OOS_Sharpe=0.334, OOS_Hit=0.520)
2025-09-12 12:01:24,255 - INFO -   Mean OOS Sharpe: 0.324, Mean Hit: 0.513
2025-09-12 12:01:24,255 - INFO - 
2025-09-12 12:01:24,260 - INFO - Starting full timeline backtesting...
2025-09-12 12:01:24,260 - INFO - Running full timeline backtest with 9 folds (0-based indexing)
2025-09-12 12:01:24,260 - INFO - Fold 0 skipped (no prior Q-score history for meaningful selection)
2025-09-12 12:01:24,260 - INFO - Effective backtest period: Folds 1-8 (8 folds)
2025-09-12 12:01:24,260 - INFO - Training period: Folds 1-5
2025-09-12 12:01:24,260 - INFO - Production period: Folds 6-8
2025-09-12 12:01:24,261 - INFO - Using consistent OOS methodology for all folds
2025-09-12 12:01:24,261 - INFO - Fold 0: Skipped (no prior Q-score history for meaningful selection)
2025-09-12 12:01:24,261 - INFO - 
--- Processing fold 1/8 ---
2025-09-12 12:01:24,291 - INFO - Fold 1: Q-scores from fold 0: ['M00:0.507', 'M01:0.518', 'M02:0.496', 'M03:0.518', 'M04:0.551']...
2025-09-12 12:01:24,291 - INFO - Fold 1: Selected models [20, 88, 4, 30, 34] based on fold 0 Q-scores, avg Q-score: 0.556
2025-09-12 12:01:24,294 - INFO - Fold 1 (Training): Sharpe=1.189, Hit=55.7%
2025-09-12 12:01:24,294 - INFO - 
--- Processing fold 2/8 ---
2025-09-12 12:01:24,320 - INFO - Fold 2: Q-scores from fold 1: ['M00:0.505', 'M01:0.513', 'M02:0.495', 'M03:0.512', 'M04:0.539']...
2025-09-12 12:01:24,321 - INFO - Fold 2: Selected models [20, 88, 34, 30, 48] based on fold 1 Q-scores, avg Q-score: 0.550
2025-09-12 12:01:24,323 - INFO - Fold 2 (Training): Sharpe=0.697, Hit=52.0%
2025-09-12 12:01:24,323 - INFO - 
--- Processing fold 3/8 ---
2025-09-12 12:01:24,351 - INFO - Fold 3: Q-scores from fold 2: ['M00:0.506', 'M01:0.511', 'M02:0.496', 'M03:0.511', 'M04:0.536']...
2025-09-12 12:01:24,351 - INFO - Fold 3: Selected models [20, 88, 30, 34, 98] based on fold 2 Q-scores, avg Q-score: 0.544
2025-09-12 12:01:24,353 - INFO - Fold 3 (Training): Sharpe=2.033, Hit=54.9%
2025-09-12 12:01:24,353 - INFO - 
--- Processing fold 4/8 ---
2025-09-12 12:01:24,382 - INFO - Fold 4: Q-scores from fold 3: ['M00:0.509', 'M01:0.507', 'M02:0.499', 'M03:0.508', 'M04:0.533']...
2025-09-12 12:01:24,382 - INFO - Fold 4: Selected models [20, 88, 30, 98, 48] based on fold 3 Q-scores, avg Q-score: 0.542
2025-09-12 12:01:24,383 - INFO - Fold 4 (Training): Sharpe=-1.016, Hit=45.1%
2025-09-12 12:01:24,383 - INFO - 
--- Processing fold 5/8 ---
2025-09-12 12:01:24,411 - INFO - Fold 5: Q-scores from fold 4: ['M00:0.506', 'M01:0.509', 'M02:0.497', 'M03:0.509', 'M04:0.526']...
2025-09-12 12:01:24,411 - INFO - Fold 5: Selected models [20, 88, 48, 30, 34] based on fold 4 Q-scores, avg Q-score: 0.538
2025-09-12 12:01:24,413 - INFO - Fold 5 (Training): Sharpe=2.173, Hit=58.6%
2025-09-12 12:01:24,413 - INFO - 
--- Processing fold 6/8 ---
2025-09-12 12:01:24,440 - INFO - Fold 6: Q-scores from fold 5: ['M00:0.504', 'M01:0.506', 'M02:0.497', 'M03:0.509', 'M04:0.522']...
2025-09-12 12:01:24,440 - INFO - Fold 6: Selected models [88, 20, 48, 30, 90] based on fold 5 Q-scores, avg Q-score: 0.533
2025-09-12 12:01:24,444 - INFO - Fold 6 (Production): Sharpe=1.090, Hit=52.7%
2025-09-12 12:01:24,444 - INFO - 
--- Processing fold 7/8 ---
2025-09-12 12:01:24,472 - INFO - Fold 7: Q-scores from fold 6: ['M00:0.506', 'M01:0.506', 'M02:0.497', 'M03:0.508', 'M04:0.516']...
2025-09-12 12:01:24,473 - INFO - Fold 7: Selected models [88, 20, 48, 98, 30] based on fold 6 Q-scores, avg Q-score: 0.529
2025-09-12 12:01:24,474 - INFO - Fold 7 (Production): Sharpe=1.064, Hit=52.0%
2025-09-12 12:01:24,474 - INFO - 
--- Processing fold 8/8 ---
2025-09-12 12:01:24,504 - INFO - Fold 8: Q-scores from fold 7: ['M00:0.504', 'M01:0.506', 'M02:0.496', 'M03:0.507', 'M04:0.511']...
2025-09-12 12:01:24,504 - INFO - Fold 8: Selected models [88, 20, 98, 54, 48] based on fold 7 Q-scores, avg Q-score: 0.523
2025-09-12 12:01:24,506 - INFO - Fold 8 (Production): Sharpe=1.847, Hit=54.7%
2025-09-12 12:01:24,507 - INFO - Training Period Overall: Sharpe=1.190, Hit=53.3%
2025-09-12 12:01:24,508 - INFO - Production Period Overall: Sharpe=1.283, Hit=53.2%
2025-09-12 12:01:24,509 - INFO - Full Timeline Overall: Sharpe=1.204, Hit=53.2%
2025-09-12 12:01:24,510 - INFO - Training: Sharpe=1.190 | Hit=53.3% | Return=5.13%
2025-09-12 12:01:24,510 - INFO - Production: Sharpe=1.283 | Hit=53.2% | Return=8.68%
2025-09-12 12:01:24,510 - INFO - Full Timeline: Sharpe=1.204 | Hit=53.2% | Return=6.46%
2025-09-12 12:01:24,510 - INFO - Generating visualizations...
2025-09-12 12:01:24,510 - INFO - Creating clean visualizations for 100 models...
2025-09-12 12:01:26,596 - INFO - Clean fold-by-fold analysis saved to: 20250912_110838_fold_@TY#C_100models_10folds_hitQ_TY_optimal_100M.png
2025-09-12 12:01:28,774 - INFO - Detailed production analysis saved to: 20250912_110838_backtest_@TY#C_100models_10folds_hitQ_TY_optimal_100M.png
2025-09-12 12:01:28,775 - INFO - ================================================================================
2025-09-12 12:01:28,775 - INFO - BACKTEST SUMMARY
2025-09-12 12:01:28,775 - INFO - ================================================================================
2025-09-12 12:01:28,775 - INFO - Config: Cutoff=70%, Top N=5, Q-Metric=sharpe, Reselection=1 fold(s)
2025-09-12 12:01:28,775 - INFO - Model Selection History:
2025-09-12 12:01:28,775 - INFO -   Fold 1: M20, M88, M04, M30, M34 (Avg Q-sharpe: 0.556)
2025-09-12 12:01:28,775 - INFO -   Fold 2: M20, M88, M34, M30, M48 (Avg Q-sharpe: 0.550)
2025-09-12 12:01:28,775 - INFO -   Fold 3: M20, M88, M30, M34, M98 (Avg Q-sharpe: 0.544)
2025-09-12 12:01:28,775 - INFO -   Fold 4: M20, M88, M30, M98, M48 (Avg Q-sharpe: 0.542)
2025-09-12 12:01:28,775 - INFO -   Fold 5: M20, M88, M48, M30, M34 (Avg Q-sharpe: 0.538)
2025-09-12 12:01:28,775 - INFO -   Fold 6: M88, M20, M48, M30, M90 (Avg Q-sharpe: 0.533)
2025-09-12 12:01:28,775 - INFO -   Fold 7: M88, M20, M48, M98, M30 (Avg Q-sharpe: 0.529)
2025-09-12 12:01:28,775 - INFO -   Fold 8: M88, M20, M98, M54, M48 (Avg Q-sharpe: 0.523)
2025-09-12 12:01:28,775 - INFO - 
2025-09-12 12:01:28,775 - INFO - Fold-by-Fold Performance:
2025-09-12 12:01:28,775 - INFO -   Fold 1: M20, M88, M04, M30, M34 | Sharpe=1.189 | Hit=55.7% | Samples=273
2025-09-12 12:01:28,775 - INFO -   Fold 2: M20, M88, M34, M30, M48 | Sharpe=0.697 | Hit=52.0% | Samples=273
2025-09-12 12:01:28,775 - INFO -   Fold 3: M20, M88, M30, M34, M98 | Sharpe=2.033 | Hit=54.9% | Samples=273
2025-09-12 12:01:28,775 - INFO -   Fold 4: M20, M88, M30, M98, M48 | Sharpe=-1.016 | Hit=45.1% | Samples=273
2025-09-12 12:01:28,775 - INFO -   Fold 5: M20, M88, M48, M30, M34 | Sharpe=2.173 | Hit=58.6% | Samples=273
2025-09-12 12:01:28,776 - INFO -   Fold 6: M88, M20, M48, M30, M90 | Sharpe=1.090 | Hit=52.7% | Samples=273
2025-09-12 12:01:28,776 - INFO -   Fold 7: M88, M20, M48, M98, M30 | Sharpe=1.064 | Hit=52.0% | Samples=273
2025-09-12 12:01:28,776 - INFO -   Fold 8: M88, M20, M98, M54, M48 | Sharpe=1.847 | Hit=54.7% | Samples=278
2025-09-12 12:01:28,776 - INFO - ================================================================================
2025-09-12 12:01:28,776 - INFO - ================================================================================
2025-09-12 12:01:28,776 - INFO - ANALYSIS COMPLETED SUCCESSFULLY!
2025-09-12 12:01:28,776 - INFO - ================================================================================
2025-09-12 12:01:28,776 - INFO - Generated 2 visualization files
2025-09-12 12:01:28,776 - INFO -   - 20250912_110838_fold_@TY#C_100models_10folds_hitQ_TY_optimal_100M.png
2025-09-12 12:01:28,776 - INFO -   - 20250912_110838_backtest_@TY#C_100models_10folds_hitQ_TY_optimal_100M.png
2025-09-12 12:01:28,776 - INFO - Training Final: Sharpe=1.190 | Hit=53.3% | Return=5.13% | CB=0.737
2025-09-12 12:01:28,776 - INFO - Production Final: Sharpe=1.283 | Hit=53.2% | Return=8.68% | CB=1.698
2025-09-12 12:01:28,776 - INFO - Full Timeline Final: Sharpe=1.204 | Hit=53.2% | Return=6.46% | CB=0.928
