2025-09-16 10:00:32,982 - INFO - ================================================================================
2025-09-16 10:00:32,982 - INFO - XGBoost Comparison Framework
2025-09-16 10:00:32,982 - INFO - ================================================================================
2025-09-16 10:00:32,982 - INFO - Configuration:
2025-09-16 10:00:32,982 - INFO -   Target Symbol: @BP#C
2025-09-16 10:00:32,982 - INFO -   Date Range: 2015-01-01 to 2025-08-01
2025-09-16 10:00:32,983 - INFO -   Models: 150, Type: tiered
2025-09-16 10:00:32,983 - INFO -   Folds: 20
2025-09-16 10:00:32,983 - INFO -   Max Features: 100 (Limited)
2025-09-16 10:00:32,983 - INFO -   Feature Selection: Enabled
2025-09-16 10:00:32,983 - INFO -   Inner Val Fraction: 0.2
2025-09-16 10:00:32,983 - INFO -   EWMA Alpha: 0.1, Quality Halflife: 63 days
2025-09-16 10:00:32,984 - INFO -   Signal Type: Tanh Normalized
2025-09-16 10:00:32,984 - INFO -   Cross-validation: Expanding window
2025-09-16 10:00:32,984 - INFO -   Production: Cutoff=0.6, Top N=8, Q-Metric=sharpe
2025-09-16 10:00:32,984 - INFO -   Reselection: Every 1 fold(s)
2025-09-16 10:00:32,984 - INFO - 
2025-09-16 10:00:38,687 - INFO - Dropped 3 rows due to NaN in target column @BP#C_target_return
2025-09-16 10:00:38,924 - INFO - Loaded: X=(2732, 1906), y=(2732,)
2025-09-16 10:01:01,578 - INFO - Selected 100 features (threshold: 0.7)
2025-09-16 10:01:01,590 - INFO - Selected: 100 features
2025-09-16 10:01:01,847 - INFO - GPU detection: CUDA GPU available and working
2025-09-16 10:01:01,848 - INFO - Processing mode: GPU sequential (GPU: True, Total models: 3000)
2025-09-16 10:01:01,870 - INFO - GPU detection: CUDA GPU available and working
2025-09-16 10:01:01,879 - INFO - Using expanding window
2025-09-16 10:01:01,880 - INFO - Starting analysis: 150 tiered models x 18 folds
2025-09-16 10:01:01,880 - INFO - Processing Fold 1/18
2025-09-16 10:01:01,884 - INFO -   Using GPU sequential processing
2025-09-16 10:07:05,973 - INFO - Fold 1 Summary:
2025-09-16 10:07:05,973 - INFO -   Best OOS Sharpe: M90 (2.310, p=0.070)
2025-09-16 10:07:05,973 - INFO -   Best Q-Sharpe:  M90 (2.310, OOS_Sharpe=2.310, OOS_Hit=0.537)
2025-09-16 10:07:05,973 - INFO -   Mean OOS Sharpe: 0.298, Mean Hit: 0.489
2025-09-16 10:07:05,973 - INFO - 
2025-09-16 10:07:05,977 - INFO - Stored 150 trained models for production export
2025-09-16 10:07:05,977 - INFO - Processing Fold 2/18
2025-09-16 10:07:05,979 - INFO -   Using GPU sequential processing
2025-09-16 10:14:02,138 - INFO - Fold 2 Summary:
2025-09-16 10:14:02,138 - INFO -   Best OOS Sharpe: M46 (2.846, p=0.010)
2025-09-16 10:14:02,138 - INFO -   Best Q-Sharpe:  M90 (2.079, OOS_Sharpe=-0.000, OOS_Hit=0.478)
2025-09-16 10:14:02,138 - INFO -   Mean OOS Sharpe: 0.145, Mean Hit: 0.465
2025-09-16 10:14:02,138 - INFO - 
2025-09-16 10:14:02,145 - INFO - Stored 150 trained models for production export
2025-09-16 10:14:02,146 - INFO - Processing Fold 3/18
2025-09-16 10:14:02,150 - INFO -   Using GPU sequential processing
2025-09-16 10:21:20,128 - INFO - Fold 3 Summary:
2025-09-16 10:21:20,128 - INFO -   Best OOS Sharpe: M60 (2.309, p=0.090)
2025-09-16 10:21:20,129 - INFO -   Best Q-Sharpe:  M86 (1.892, OOS_Sharpe=0.333, OOS_Hit=0.529)
2025-09-16 10:21:20,129 - INFO -   Mean OOS Sharpe: -0.429, Mean Hit: 0.506
2025-09-16 10:21:20,129 - INFO - 
2025-09-16 10:21:20,134 - INFO - Stored 150 trained models for production export
2025-09-16 10:21:20,134 - INFO - Processing Fold 4/18
2025-09-16 10:21:20,137 - INFO -   Using GPU sequential processing
2025-09-16 10:27:57,283 - INFO - Fold 4 Summary:
2025-09-16 10:27:57,283 - INFO -   Best OOS Sharpe: M129 (3.323, p=0.000)
2025-09-16 10:27:57,283 - INFO -   Best Q-Sharpe:  M86 (1.797, OOS_Sharpe=0.938, OOS_Hit=0.478)
2025-09-16 10:27:57,283 - INFO -   Mean OOS Sharpe: 0.266, Mean Hit: 0.498
2025-09-16 10:27:57,283 - INFO - 
2025-09-16 10:27:57,290 - INFO - Stored 150 trained models for production export
2025-09-16 10:27:57,290 - INFO - Processing Fold 5/18
2025-09-16 10:27:57,293 - INFO -   Using GPU sequential processing
2025-09-16 10:34:34,244 - INFO - Fold 5 Summary:
2025-09-16 10:34:34,244 - INFO -   Best OOS Sharpe: M46 (3.884, p=0.000)
2025-09-16 10:34:34,244 - INFO -   Best Q-Sharpe:  M86 (1.750, OOS_Sharpe=1.335, OOS_Hit=0.515)
2025-09-16 10:34:34,245 - INFO -   Mean OOS Sharpe: 1.199, Mean Hit: 0.538
2025-09-16 10:34:34,245 - INFO - 
2025-09-16 10:34:34,251 - INFO - Stored 150 trained models for production export
2025-09-16 10:34:34,251 - INFO - Processing Fold 6/18
2025-09-16 10:34:34,254 - INFO -   Using GPU sequential processing
2025-09-16 10:44:28,201 - INFO - Fold 6 Summary:
2025-09-16 10:44:28,201 - INFO -   Best OOS Sharpe: M04 (3.737, p=0.000)
2025-09-16 10:44:28,201 - INFO -   Best Q-Sharpe:  M86 (1.865, OOS_Sharpe=2.894, OOS_Hit=0.551)
2025-09-16 10:44:28,201 - INFO -   Mean OOS Sharpe: 1.548, Mean Hit: 0.515
2025-09-16 10:44:28,201 - INFO - 
2025-09-16 10:44:28,205 - INFO - Stored 150 trained models for production export
2025-09-16 10:44:28,205 - INFO - Processing Fold 7/18
2025-09-16 10:44:28,208 - INFO -   Using GPU sequential processing
2025-09-16 10:54:41,756 - INFO - Fold 7 Summary:
2025-09-16 10:54:41,756 - INFO -   Best OOS Sharpe: M03 (3.459, p=0.030)
2025-09-16 10:54:41,756 - INFO -   Best Q-Sharpe:  M86 (1.749, OOS_Sharpe=0.712, OOS_Hit=0.507)
2025-09-16 10:54:41,756 - INFO -   Mean OOS Sharpe: 1.046, Mean Hit: 0.540
2025-09-16 10:54:41,756 - INFO - 
2025-09-16 10:54:41,762 - INFO - Stored 150 trained models for production export
2025-09-16 10:54:41,762 - INFO - Processing Fold 8/18
2025-09-16 10:54:41,767 - INFO -   Using GPU sequential processing
2025-09-16 11:05:51,600 - INFO - Fold 8 Summary:
2025-09-16 11:05:51,600 - INFO -   Best OOS Sharpe: M50 (3.217, p=0.040)
2025-09-16 11:05:51,600 - INFO -   Best Q-Sharpe:  M48 (1.756, OOS_Sharpe=2.324, OOS_Hit=0.515)
2025-09-16 11:05:51,600 - INFO -   Mean OOS Sharpe: 0.989, Mean Hit: 0.538
2025-09-16 11:05:51,600 - INFO - 
2025-09-16 11:05:51,606 - INFO - Stored 150 trained models for production export
2025-09-16 11:05:51,606 - INFO - Processing Fold 9/18
2025-09-16 11:05:51,610 - INFO -   Using GPU sequential processing
2025-09-16 11:17:27,996 - INFO - Fold 9 Summary:
2025-09-16 11:17:27,997 - INFO -   Best OOS Sharpe: M52 (4.745, p=0.000)
2025-09-16 11:17:27,997 - INFO -   Best Q-Sharpe:  M48 (1.838, OOS_Sharpe=2.575, OOS_Hit=0.596)
2025-09-16 11:17:27,997 - INFO -   Mean OOS Sharpe: 2.929, Mean Hit: 0.584
2025-09-16 11:17:27,997 - INFO - 
2025-09-16 11:17:28,001 - INFO - Stored 150 trained models for production export
2025-09-16 11:17:28,001 - INFO - Processing Fold 10/18
2025-09-16 11:17:28,004 - INFO -   Using GPU sequential processing
2025-09-16 11:26:15,668 - INFO - Fold 10 Summary:
2025-09-16 11:26:15,668 - INFO -   Best OOS Sharpe: M64 (4.602, p=0.000)
2025-09-16 11:26:15,668 - INFO -   Best Q-Sharpe:  M86 (1.671, OOS_Sharpe=0.524, OOS_Hit=0.515)
2025-09-16 11:26:15,668 - INFO -   Mean OOS Sharpe: 1.155, Mean Hit: 0.533
2025-09-16 11:26:15,668 - INFO - 
2025-09-16 11:26:15,675 - INFO - Stored 150 trained models for production export
2025-09-16 11:26:15,675 - INFO - Processing Fold 11/18
2025-09-16 11:26:15,681 - INFO -   Using GPU sequential processing
2025-09-16 11:32:28,082 - INFO - Fold 11 Summary:
2025-09-16 11:32:28,082 - INFO -   Best OOS Sharpe: M53 (2.983, p=0.040)
2025-09-16 11:32:28,082 - INFO -   Best Q-Sharpe:  M90 (1.610, OOS_Sharpe=1.612, OOS_Hit=0.544)
2025-09-16 11:32:28,082 - INFO -   Mean OOS Sharpe: 1.030, Mean Hit: 0.525
2025-09-16 11:32:28,082 - INFO - 
2025-09-16 11:32:28,088 - INFO - Stored 150 trained models for production export
2025-09-16 11:32:28,088 - INFO - Processing Fold 12/18
2025-09-16 11:32:28,091 - INFO -   Using GPU sequential processing
2025-09-16 11:38:24,675 - INFO - Fold 12 Summary:
2025-09-16 11:38:24,675 - INFO -   Best OOS Sharpe: M36 (4.633, p=0.000)
2025-09-16 11:38:24,675 - INFO -   Best Q-Sharpe:  M74 (1.709, OOS_Sharpe=2.896, OOS_Hit=0.515)
2025-09-16 11:38:24,675 - INFO -   Mean OOS Sharpe: 2.770, Mean Hit: 0.535
2025-09-16 11:38:24,675 - INFO - 
2025-09-16 11:38:24,681 - INFO - Stored 150 trained models for production export
2025-09-16 11:38:24,681 - INFO - Processing Fold 13/18
2025-09-16 11:38:24,684 - INFO -   Using GPU sequential processing
2025-09-16 11:43:13,596 - INFO - Fold 13 Summary:
2025-09-16 11:43:13,596 - INFO -   Best OOS Sharpe: M15 (4.365, p=0.010)
2025-09-16 11:43:13,596 - INFO -   Best Q-Sharpe:  M74 (1.838, OOS_Sharpe=2.993, OOS_Hit=0.515)
2025-09-16 11:43:13,596 - INFO -   Mean OOS Sharpe: 1.676, Mean Hit: 0.508
2025-09-16 11:43:13,596 - INFO - 
2025-09-16 11:43:13,603 - INFO - Stored 150 trained models for production export
2025-09-16 11:43:13,603 - INFO - Processing Fold 14/18
2025-09-16 11:43:13,607 - INFO -   Using GPU sequential processing
2025-09-16 11:46:48,713 - INFO - Fold 14 Summary:
2025-09-16 11:46:48,713 - INFO -   Best OOS Sharpe: M107 (4.377, p=0.000)
2025-09-16 11:46:48,713 - INFO -   Best Q-Sharpe:  M90 (1.940, OOS_Sharpe=3.426, OOS_Hit=0.581)
2025-09-16 11:46:48,713 - INFO -   Mean OOS Sharpe: 2.595, Mean Hit: 0.555
2025-09-16 11:46:48,713 - INFO - 
2025-09-16 11:46:48,720 - INFO - Stored 150 trained models for production export
2025-09-16 11:46:48,720 - INFO - Processing Fold 15/18
2025-09-16 11:46:48,724 - INFO -   Using GPU sequential processing
2025-09-16 11:49:11,273 - INFO - Fold 15 Summary:
2025-09-16 11:49:11,273 - INFO -   Best OOS Sharpe: M45 (2.546, p=0.070)
2025-09-16 11:49:11,273 - INFO -   Best Q-Sharpe:  M135 (1.836, OOS_Sharpe=2.089, OOS_Hit=0.559)
2025-09-16 11:49:11,273 - INFO -   Mean OOS Sharpe: 1.090, Mean Hit: 0.518
2025-09-16 11:49:11,273 - INFO - 
2025-09-16 11:49:11,281 - INFO - Stored 150 trained models for production export
2025-09-16 11:49:11,281 - INFO - Processing Fold 16/18
2025-09-16 11:49:11,286 - INFO -   Using GPU sequential processing
2025-09-16 11:50:27,080 - INFO - Fold 16 Summary:
2025-09-16 11:50:27,080 - INFO -   Best OOS Sharpe: M107 (3.476, p=0.000)
2025-09-16 11:50:27,080 - INFO -   Best Q-Sharpe:  M74 (1.834, OOS_Sharpe=1.915, OOS_Hit=0.507)
2025-09-16 11:50:27,080 - INFO -   Mean OOS Sharpe: 1.637, Mean Hit: 0.503
2025-09-16 11:50:27,080 - INFO - 
2025-09-16 11:50:27,086 - INFO - Stored 150 trained models for production export
2025-09-16 11:50:27,086 - INFO - Processing Fold 17/18
2025-09-16 11:50:27,090 - INFO -   Using GPU sequential processing
2025-09-16 11:51:43,074 - INFO - Fold 17 Summary:
2025-09-16 11:51:43,074 - INFO -   Best OOS Sharpe: M133 (1.755, p=0.170)
2025-09-16 11:51:43,074 - INFO -   Best Q-Sharpe:  M74 (1.693, OOS_Sharpe=0.425, OOS_Hit=0.500)
2025-09-16 11:51:43,074 - INFO -   Mean OOS Sharpe: -0.104, Mean Hit: 0.512
2025-09-16 11:51:43,075 - INFO - 
2025-09-16 11:51:43,081 - INFO - Stored 150 trained models for production export
2025-09-16 11:51:43,081 - INFO - Processing Fold 18/18
2025-09-16 11:51:43,085 - INFO -   Using GPU sequential processing
2025-09-16 11:53:00,062 - INFO - Fold 18 Summary:
2025-09-16 11:53:00,062 - INFO -   Best OOS Sharpe: M77 (3.109, p=0.020)
2025-09-16 11:53:00,062 - INFO -   Best Q-Sharpe:  M86 (1.722, OOS_Sharpe=2.293, OOS_Hit=0.595)
2025-09-16 11:53:00,062 - INFO -   Mean OOS Sharpe: 0.801, Mean Hit: 0.509
2025-09-16 11:53:00,062 - INFO - 
2025-09-16 11:53:00,069 - INFO - Stored 150 trained models for production export
2025-09-16 11:53:00,069 - INFO - Starting full timeline backtesting...
2025-09-16 11:53:00,069 - INFO - Running full timeline backtest with 18 folds (0-based indexing)
2025-09-16 11:53:00,069 - INFO - Fold 0 skipped (no prior Q-score history for meaningful selection)
2025-09-16 11:53:00,069 - INFO - Effective backtest period: Folds 1-17 (17 folds)
2025-09-16 11:53:00,069 - INFO - Training period: Folds 1-10
2025-09-16 11:53:00,069 - INFO - Production period: Folds 11-17
2025-09-16 11:53:00,069 - INFO - Using consistent OOS methodology for all folds
2025-09-16 11:53:00,070 - INFO - Fold 0: Skipped (no prior Q-score history for meaningful selection)
2025-09-16 11:53:00,070 - INFO - 
--- Processing fold 1/17 ---
2025-09-16 11:53:00,105 - INFO - Fold 1: Q-scores from fold 0: ['M00:-0.121', 'M01:0.456', 'M02:-0.085', 'M03:1.886', 'M04:0.516']...
2025-09-16 11:53:00,105 - INFO - Fold 1: Selected models [90, 135, 86, 88, 48, 74, 104, 127] based on fold 0 Q-scores, avg Q-score: 2.103
2025-09-16 11:53:00,106 - INFO - Fold 1 (Training): Sharpe=0.370, Hit=47.8%
2025-09-16 11:53:00,107 - INFO - 
--- Processing fold 2/17 ---
2025-09-16 11:53:00,130 - INFO - Fold 2: Q-scores from fold 1: ['M00:-0.167', 'M01:0.300', 'M02:-0.102', 'M03:1.718', 'M04:0.501']...
2025-09-16 11:53:00,130 - INFO - Fold 2: Selected models [90, 86, 135, 74, 5, 88, 104, 48] based on fold 1 Q-scores, avg Q-score: 1.940
2025-09-16 11:53:00,131 - INFO - Fold 2 (Training): Sharpe=-0.401, Hit=50.7%
2025-09-16 11:53:00,132 - INFO - 
--- Processing fold 3/17 ---
2025-09-16 11:53:00,155 - INFO - Fold 3: Q-scores from fold 2: ['M00:-0.191', 'M01:0.228', 'M02:-0.203', 'M03:1.544', 'M04:0.469']...
2025-09-16 11:53:00,155 - INFO - Fold 3: Selected models [86, 135, 90, 88, 5, 48, 104, 127] based on fold 2 Q-scores, avg Q-score: 1.718
2025-09-16 11:53:00,156 - INFO - Fold 3 (Training): Sharpe=0.610, Hit=47.8%
2025-09-16 11:53:00,157 - INFO - 
--- Processing fold 4/17 ---
2025-09-16 11:53:00,180 - INFO - Fold 4: Q-scores from fold 3: ['M00:-0.197', 'M01:0.143', 'M02:-0.163', 'M03:1.547', 'M04:0.499']...
2025-09-16 11:53:00,180 - INFO - Fold 4: Selected models [86, 48, 88, 135, 5, 90, 3, 104] based on fold 3 Q-scores, avg Q-score: 1.626
2025-09-16 11:53:00,181 - INFO - Fold 4 (Training): Sharpe=1.238, Hit=48.5%
2025-09-16 11:53:00,181 - INFO - 
--- Processing fold 5/17 ---
2025-09-16 11:53:00,204 - INFO - Fold 5: Q-scores from fold 4: ['M00:0.010', 'M01:0.238', 'M02:0.041', 'M03:1.463', 'M04:0.510']...
2025-09-16 11:53:00,205 - INFO - Fold 5: Selected models [86, 48, 5, 135, 90, 3, 88, 104] based on fold 4 Q-scores, avg Q-score: 1.560
2025-09-16 11:53:00,206 - INFO - Fold 5 (Training): Sharpe=2.138, Hit=51.5%
2025-09-16 11:53:00,206 - INFO - 
--- Processing fold 6/17 ---
2025-09-16 11:53:00,233 - INFO - Fold 6: Q-scores from fold 5: ['M00:0.047', 'M01:0.331', 'M02:0.097', 'M03:1.382', 'M04:0.833']...
2025-09-16 11:53:00,233 - INFO - Fold 6: Selected models [86, 48, 5, 135, 88, 90, 74, 3] based on fold 5 Q-scores, avg Q-score: 1.577
2025-09-16 11:53:00,234 - INFO - Fold 6 (Training): Sharpe=1.517, Hit=56.6%
2025-09-16 11:53:00,235 - INFO - 
--- Processing fold 7/17 ---
2025-09-16 11:53:00,258 - INFO - Fold 7: Q-scores from fold 6: ['M00:0.166', 'M01:0.344', 'M02:0.145', 'M03:1.590', 'M04:0.894']...
2025-09-16 11:53:00,259 - INFO - Fold 7: Selected models [86, 48, 3, 5, 135, 88, 74, 90] based on fold 6 Q-scores, avg Q-score: 1.550
2025-09-16 11:53:00,260 - INFO - Fold 7 (Training): Sharpe=1.157, Hit=52.9%
2025-09-16 11:53:00,260 - INFO - 
--- Processing fold 8/17 ---
2025-09-16 11:53:00,283 - INFO - Fold 8: Q-scores from fold 7: ['M00:0.278', 'M01:0.574', 'M02:0.258', 'M03:1.452', 'M04:0.944']...
2025-09-16 11:53:00,283 - INFO - Fold 8: Selected models [48, 86, 5, 135, 3, 74, 88, 60] based on fold 7 Q-scores, avg Q-score: 1.503
2025-09-16 11:53:00,284 - INFO - Fold 8 (Training): Sharpe=3.464, Hit=61.8%
2025-09-16 11:53:00,284 - INFO - 
--- Processing fold 9/17 ---
2025-09-16 11:53:00,309 - INFO - Fold 9: Q-scores from fold 8: ['M00:0.463', 'M01:0.901', 'M02:0.443', 'M03:1.585', 'M04:1.135']...
2025-09-16 11:53:00,309 - INFO - Fold 9: Selected models [48, 86, 135, 88, 5, 90, 3, 74] based on fold 8 Q-scores, avg Q-score: 1.677
2025-09-16 11:53:00,310 - INFO - Fold 9 (Training): Sharpe=0.641, Hit=53.7%
2025-09-16 11:53:00,310 - INFO - 
--- Processing fold 10/17 ---
2025-09-16 11:53:00,333 - INFO - Fold 10: Q-scores from fold 9: ['M00:0.560', 'M01:0.975', 'M02:0.350', 'M03:1.521', 'M04:1.161']...
2025-09-16 11:53:00,333 - INFO - Fold 10: Selected models [86, 48, 90, 135, 5, 3, 88, 74] based on fold 9 Q-scores, avg Q-score: 1.560
2025-09-16 11:53:00,335 - INFO - Fold 10 (Training): Sharpe=1.235, Hit=55.9%
2025-09-16 11:53:00,335 - INFO - 
--- Processing fold 11/17 ---
2025-09-16 11:53:00,359 - INFO - Fold 11: Q-scores from fold 10: ['M00:0.561', 'M01:1.011', 'M02:0.407', 'M03:1.357', 'M04:1.177']...
2025-09-16 11:53:00,360 - INFO - Fold 11: Selected models [90, 135, 74, 86, 5, 48, 127, 88] based on fold 10 Q-scores, avg Q-score: 1.513
2025-09-16 11:53:00,361 - INFO - Fold 11 (Production): Sharpe=2.822, Hit=54.4%
2025-09-16 11:53:00,361 - INFO - 
--- Processing fold 12/17 ---
2025-09-16 11:53:00,387 - INFO - Fold 12: Q-scores from fold 11: ['M00:0.910', 'M01:1.215', 'M02:0.658', 'M03:1.470', 'M04:1.340']...
2025-09-16 11:53:00,387 - INFO - Fold 12: Selected models [74, 135, 90, 127, 86, 5, 16, 139] based on fold 11 Q-scores, avg Q-score: 1.622
2025-09-16 11:53:00,388 - INFO - Fold 12 (Production): Sharpe=2.503, Hit=55.1%
2025-09-16 11:53:00,388 - INFO - 
--- Processing fold 13/17 ---
2025-09-16 11:53:00,415 - INFO - Fold 13: Q-scores from fold 12: ['M00:0.951', 'M01:1.026', 'M02:0.873', 'M03:1.460', 'M04:1.575']...
2025-09-16 11:53:00,415 - INFO - Fold 13: Selected models [74, 90, 86, 127, 135, 5, 112, 95] based on fold 12 Q-scores, avg Q-score: 1.681
2025-09-16 11:53:00,416 - INFO - Fold 13 (Production): Sharpe=2.841, Hit=57.4%
2025-09-16 11:53:00,416 - INFO - 
--- Processing fold 14/17 ---
2025-09-16 11:53:00,440 - INFO - Fold 14: Q-scores from fold 13: ['M00:1.168', 'M01:1.145', 'M02:1.115', 'M03:1.540', 'M04:1.568']...
2025-09-16 11:53:00,441 - INFO - Fold 14: Selected models [90, 74, 135, 88, 86, 127, 5, 82] based on fold 13 Q-scores, avg Q-score: 1.774
2025-09-16 11:53:00,442 - INFO - Fold 14 (Production): Sharpe=1.621, Hit=49.3%
2025-09-16 11:53:00,442 - INFO - 
--- Processing fold 15/17 ---
2025-09-16 11:53:00,466 - INFO - Fold 15: Q-scores from fold 14: ['M00:1.145', 'M01:1.169', 'M02:1.148', 'M03:1.467', 'M04:1.537']...
2025-09-16 11:53:00,466 - INFO - Fold 15: Selected models [135, 74, 90, 16, 5, 86, 139, 82] based on fold 14 Q-scores, avg Q-score: 1.742
2025-09-16 11:53:00,467 - INFO - Fold 15 (Production): Sharpe=2.024, Hit=50.7%
2025-09-16 11:53:00,467 - INFO - 
--- Processing fold 16/17 ---
2025-09-16 11:53:00,491 - INFO - Fold 16: Q-scores from fold 15: ['M00:1.078', 'M01:1.338', 'M02:1.095', 'M03:1.653', 'M04:1.565']...
2025-09-16 11:53:00,491 - INFO - Fold 16: Selected models [74, 5, 135, 90, 127, 86, 139, 82] based on fold 15 Q-scores, avg Q-score: 1.749
2025-09-16 11:53:00,492 - INFO - Fold 16 (Production): Sharpe=0.415, Hit=51.5%
2025-09-16 11:53:00,492 - INFO - 
--- Processing fold 17/17 ---
2025-09-16 11:53:00,516 - INFO - Fold 17: Q-scores from fold 16: ['M00:0.981', 'M01:1.098', 'M02:1.002', 'M03:1.439', 'M04:1.484']...
2025-09-16 11:53:00,516 - INFO - Fold 17: Selected models [74, 86, 5, 139, 127, 133, 135, 82] based on fold 16 Q-scores, avg Q-score: 1.621
2025-09-16 11:53:00,517 - INFO - Fold 17 (Production): Sharpe=0.872, Hit=53.4%
2025-09-16 11:53:00,518 - INFO - Training Period Overall: Sharpe=1.196, Hit=52.7%
2025-09-16 11:53:00,519 - INFO - Production Period Overall: Sharpe=1.891, Hit=53.1%
2025-09-16 11:53:00,521 - INFO - Full Timeline Overall: Sharpe=1.496, Hit=52.9%
2025-09-16 11:53:00,521 - INFO - Training: Sharpe=1.196 | Hit=52.7% | Return=5.36%
2025-09-16 11:53:00,521 - INFO - Production: Sharpe=1.891 | Hit=53.1% | Return=9.19%
2025-09-16 11:53:00,521 - INFO - Full Timeline: Sharpe=1.496 | Hit=52.9% | Return=6.95%
2025-09-16 11:53:00,521 - INFO - Generating visualizations...
2025-09-16 11:53:00,522 - INFO - Creating clean visualizations for 150 models...
2025-09-16 11:53:03,897 - INFO - Clean fold-by-fold analysis saved to: 20250916_100032_fold_@BP#C_150models_20folds_PROD_BP_final_with_signals.png
2025-09-16 11:53:06,733 - INFO - Detailed production analysis saved to: 20250916_100032_backtest_@BP#C_150models_20folds_PROD_BP_final_with_signals.png
2025-09-16 11:53:06,734 - INFO - ================================================================================
2025-09-16 11:53:06,734 - INFO - BACKTEST SUMMARY
2025-09-16 11:53:06,734 - INFO - ================================================================================
2025-09-16 11:53:06,734 - INFO - Config: Cutoff=70%, Top N=5, Q-Metric=sharpe, Reselection=1 fold(s)
2025-09-16 11:53:06,734 - INFO - Model Selection History:
2025-09-16 11:53:06,734 - INFO -   Fold 1: M90, M135, M86, M88, M48, M74, M104, M127 (Avg Q-sharpe: 2.103)
2025-09-16 11:53:06,734 - INFO -   Fold 2: M90, M86, M135, M74, M05, M88, M104, M48 (Avg Q-sharpe: 1.940)
2025-09-16 11:53:06,734 - INFO -   Fold 3: M86, M135, M90, M88, M05, M48, M104, M127 (Avg Q-sharpe: 1.718)
2025-09-16 11:53:06,734 - INFO -   Fold 4: M86, M48, M88, M135, M05, M90, M03, M104 (Avg Q-sharpe: 1.626)
2025-09-16 11:53:06,734 - INFO -   Fold 5: M86, M48, M05, M135, M90, M03, M88, M104 (Avg Q-sharpe: 1.560)
2025-09-16 11:53:06,734 - INFO -   Fold 6: M86, M48, M05, M135, M88, M90, M74, M03 (Avg Q-sharpe: 1.577)
2025-09-16 11:53:06,734 - INFO -   Fold 7: M86, M48, M03, M05, M135, M88, M74, M90 (Avg Q-sharpe: 1.550)
2025-09-16 11:53:06,734 - INFO -   Fold 8: M48, M86, M05, M135, M03, M74, M88, M60 (Avg Q-sharpe: 1.503)
2025-09-16 11:53:06,734 - INFO -   Fold 9: M48, M86, M135, M88, M05, M90, M03, M74 (Avg Q-sharpe: 1.677)
2025-09-16 11:53:06,734 - INFO -   Fold 10: M86, M48, M90, M135, M05, M03, M88, M74 (Avg Q-sharpe: 1.560)
2025-09-16 11:53:06,734 - INFO -   Fold 11: M90, M135, M74, M86, M05, M48, M127, M88 (Avg Q-sharpe: 1.513)
2025-09-16 11:53:06,734 - INFO -   Fold 12: M74, M135, M90, M127, M86, M05, M16, M139 (Avg Q-sharpe: 1.622)
2025-09-16 11:53:06,734 - INFO -   Fold 13: M74, M90, M86, M127, M135, M05, M112, M95 (Avg Q-sharpe: 1.681)
2025-09-16 11:53:06,734 - INFO -   Fold 14: M90, M74, M135, M88, M86, M127, M05, M82 (Avg Q-sharpe: 1.774)
2025-09-16 11:53:06,734 - INFO -   Fold 15: M135, M74, M90, M16, M05, M86, M139, M82 (Avg Q-sharpe: 1.742)
2025-09-16 11:53:06,734 - INFO -   Fold 16: M74, M05, M135, M90, M127, M86, M139, M82 (Avg Q-sharpe: 1.749)
2025-09-16 11:53:06,734 - INFO -   Fold 17: M74, M86, M05, M139, M127, M133, M135, M82 (Avg Q-sharpe: 1.621)
2025-09-16 11:53:06,734 - INFO - 
2025-09-16 11:53:06,734 - INFO - Fold-by-Fold Performance:
2025-09-16 11:53:06,734 - INFO -   Fold 1: M90, M135, M86, M88, M48, M74, M104, M127 | Sharpe=0.370 | Hit=47.8% | Samples=136
2025-09-16 11:53:06,734 - INFO -   Fold 2: M90, M86, M135, M74, M05, M88, M104, M48 | Sharpe=-0.401 | Hit=50.7% | Samples=136
2025-09-16 11:53:06,734 - INFO -   Fold 3: M86, M135, M90, M88, M05, M48, M104, M127 | Sharpe=0.610 | Hit=47.8% | Samples=136
2025-09-16 11:53:06,734 - INFO -   Fold 4: M86, M48, M88, M135, M05, M90, M03, M104 | Sharpe=1.238 | Hit=48.5% | Samples=136
2025-09-16 11:53:06,734 - INFO -   Fold 5: M86, M48, M05, M135, M90, M03, M88, M104 | Sharpe=2.138 | Hit=51.5% | Samples=136
2025-09-16 11:53:06,734 - INFO -   Fold 6: M86, M48, M05, M135, M88, M90, M74, M03 | Sharpe=1.517 | Hit=56.6% | Samples=136
2025-09-16 11:53:06,734 - INFO -   Fold 7: M86, M48, M03, M05, M135, M88, M74, M90 | Sharpe=1.157 | Hit=52.9% | Samples=136
2025-09-16 11:53:06,734 - INFO -   Fold 8: M48, M86, M05, M135, M03, M74, M88, M60 | Sharpe=3.464 | Hit=61.8% | Samples=136
2025-09-16 11:53:06,734 - INFO -   Fold 9: M48, M86, M135, M88, M05, M90, M03, M74 | Sharpe=0.641 | Hit=53.7% | Samples=136
2025-09-16 11:53:06,734 - INFO -   Fold 10: M86, M48, M90, M135, M05, M03, M88, M74 | Sharpe=1.235 | Hit=55.9% | Samples=136
2025-09-16 11:53:06,734 - INFO -   Fold 11: M90, M135, M74, M86, M05, M48, M127, M88 | Sharpe=2.822 | Hit=54.4% | Samples=136
2025-09-16 11:53:06,734 - INFO -   Fold 12: M74, M135, M90, M127, M86, M05, M16, M139 | Sharpe=2.503 | Hit=55.1% | Samples=136
2025-09-16 11:53:06,734 - INFO -   Fold 13: M74, M90, M86, M127, M135, M05, M112, M95 | Sharpe=2.841 | Hit=57.4% | Samples=136
2025-09-16 11:53:06,734 - INFO -   Fold 14: M90, M74, M135, M88, M86, M127, M05, M82 | Sharpe=1.621 | Hit=49.3% | Samples=136
2025-09-16 11:53:06,735 - INFO -   Fold 15: M135, M74, M90, M16, M05, M86, M139, M82 | Sharpe=2.024 | Hit=50.7% | Samples=136
2025-09-16 11:53:06,735 - INFO -   Fold 16: M74, M05, M135, M90, M127, M86, M139, M82 | Sharpe=0.415 | Hit=51.5% | Samples=136
2025-09-16 11:53:06,735 - INFO -   Fold 17: M74, M86, M05, M139, M127, M133, M135, M82 | Sharpe=0.872 | Hit=53.4% | Samples=148
2025-09-16 11:53:06,735 - INFO - ================================================================================
2025-09-16 11:53:06,735 - INFO - ================================================================================
2025-09-16 11:53:06,735 - INFO - ANALYSIS COMPLETED SUCCESSFULLY!
2025-09-16 11:53:06,735 - INFO - ================================================================================
2025-09-16 11:53:06,735 - INFO - Generated 2 visualization files
2025-09-16 11:53:06,735 - INFO -   - 20250916_100032_fold_@BP#C_150models_20folds_PROD_BP_final_with_signals.png
2025-09-16 11:53:06,735 - INFO -   - 20250916_100032_backtest_@BP#C_150models_20folds_PROD_BP_final_with_signals.png
2025-09-16 11:53:06,735 - INFO - Training Final: Sharpe=1.196 | Hit=52.7% | Return=5.36% | CB=1.516
2025-09-16 11:53:06,735 - INFO - Production Final: Sharpe=1.891 | Hit=53.1% | Return=9.19% | CB=1.687
2025-09-16 11:53:06,735 - INFO - Full Timeline Final: Sharpe=1.496 | Hit=52.9% | Return=6.95% | CB=1.276
2025-09-16 11:53:06,735 - INFO - ============================================================
2025-09-16 11:53:06,735 - INFO - EXPORTING PRODUCTION MODELS (Consolidated File)
2025-09-16 11:53:06,735 - INFO - ============================================================
2025-09-16 11:53:06,735 - INFO - Backtest results keys: ['full_timeline_metrics', 'training_metrics', 'production_metrics', 'model_selection_history', 'fold_results', 'full_timeline_returns', 'training_returns', 'production_returns', 'full_timeline_predictions', 'full_timeline_dates', 'cutoff_fold', 'training_folds', 'production_folds']
2025-09-16 11:53:06,735 - INFO - Model selection history length: 17
2025-09-16 11:53:06,735 - INFO - Final selection keys: ['fold', 'selection_based_on_fold', 'selected_models', 'avg_q_score', 'period_type']
2025-09-16 11:53:06,735 - INFO - Final fold selected models: [74, 86, 5, 139, 127, 133, 135, 82]
2025-09-16 11:53:06,735 - INFO - All fold results type: <class 'dict'>
2025-09-16 11:53:06,735 - INFO - All fold results keys/length: ['fold_1', 'fold_2', 'fold_3', 'fold_4', 'fold_5', 'fold_6', 'fold_7', 'fold_8', 'fold_9', 'fold_10', 'fold_11', 'fold_12', 'fold_13', 'fold_14', 'fold_15', 'fold_16', 'fold_17', 'fold_18']
2025-09-16 11:53:06,735 - INFO - Using fold fold_9 as final fold
2025-09-16 11:53:06,735 - INFO - Final fold keys: ['results_df', 'model_metrics', 'oos_predictions', 'test_idx', 'trained_models', 'model_specs']
2025-09-16 11:53:06,735 - INFO - Trained models available: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149]
2025-09-16 11:53:06,735 - INFO - Added model M74 -> model_01 with all 100 features (framework standard)
2025-09-16 11:53:06,736 - INFO - Added model M86 -> model_02 with all 100 features (framework standard)
2025-09-16 11:53:06,736 - INFO - Added model M05 -> model_03 with all 100 features (framework standard)
2025-09-16 11:53:06,736 - INFO - Added model M139 -> model_04 with all 100 features (framework standard)
2025-09-16 11:53:06,736 - INFO - Added model M127 -> model_05 with all 100 features (framework standard)
2025-09-16 11:53:06,736 - INFO - Added model M133 -> model_06 with all 100 features (framework standard)
2025-09-16 11:53:06,736 - INFO - Added model M135 -> model_07 with all 100 features (framework standard)
2025-09-16 11:53:06,736 - INFO - Added model M82 -> model_08 with all 100 features (framework standard)
2025-09-16 11:53:06,736 - INFO - Extracted 8 selected models
2025-09-16 11:53:06,754 - INFO - SUCCESS: Exported 8 selected models to C:\Users\zhang\Desktop\Steve\bond_ls_xgb_grope_full_v6\PROD\models\@BP#C_production.pkl
2025-09-16 11:53:06,754 - INFO - File size: 3,632,304 bytes
2025-09-16 11:53:06,754 - INFO - Selected features: 100 features
2025-09-16 11:53:06,754 - INFO - Selected models: [74, 86, 5, 139, 127, 133, 135, 82]
2025-09-16 11:53:06,754 - INFO - ============================================================
2025-09-16 11:53:06,754 - INFO - EXPORTING SIGNAL DISTRIBUTION
2025-09-16 11:53:06,754 - INFO - ============================================================
2025-09-16 11:53:06,754 - INFO - Timeline data: 2324 points
2025-09-16 11:53:06,785 - INFO - SUCCESS: Exported signal distribution to C:\Users\zhang\Desktop\Steve\bond_ls_xgb_grope_full_v6\xgb_compare\results\PROD_BP_final_with_signals_signal_distribution.csv
2025-09-16 11:53:06,786 - INFO - Records: 2,324
2025-09-16 11:53:06,786 - INFO - Date range: 2016-08-01 12:00:00 to 2025-07-30 12:00:00
2025-09-16 11:53:06,786 - INFO - Signals: {1: 1168, -1: 1156}
2025-09-16 11:53:06,786 - INFO - Hit rate: 0.503
2025-09-16 11:53:06,787 - INFO - Total PnL: 0.010022
