2025-09-13 13:36:59,147 - INFO - ================================================================================
2025-09-13 13:36:59,148 - INFO - XGBoost Comparison Framework
2025-09-13 13:36:59,148 - INFO - ================================================================================
2025-09-13 13:36:59,148 - INFO - Configuration:
2025-09-13 13:36:59,148 - INFO -   Target Symbol: @TY#C
2025-09-13 13:36:59,148 - INFO -   Date Range: 2015-01-01 to 2025-08-01
2025-09-13 13:36:59,148 - INFO -   Models: 150, Type: tiered
2025-09-13 13:36:59,148 - INFO -   Folds: 10
2025-09-13 13:36:59,148 - INFO -   Max Features: 250 (Limited)
2025-09-13 13:36:59,148 - INFO -   Feature Selection: Enabled
2025-09-13 13:36:59,148 - INFO -   Inner Val Fraction: 0.2
2025-09-13 13:36:59,148 - INFO -   EWMA Alpha: 0.1, Quality Halflife: 63 days
2025-09-13 13:36:59,148 - INFO -   Signal Type: Tanh Normalized
2025-09-13 13:36:59,148 - INFO -   Cross-validation: Expanding window
2025-09-13 13:36:59,148 - INFO -   Production: Cutoff=0.6, Top N=8, Q-Metric=sharpe
2025-09-13 13:36:59,148 - INFO -   Reselection: Every 1 fold(s)
2025-09-13 13:36:59,148 - INFO - 
2025-09-13 13:37:05,274 - INFO - Dropped 4 rows due to NaN in target column @TY#C_target_return
2025-09-13 13:37:05,515 - INFO - Loaded: X=(2731, 1906), y=(2731,)
2025-09-13 13:37:33,437 - INFO - Selected 250 features (threshold: 0.7)
2025-09-13 13:37:33,449 - INFO - Selected: 250 features
2025-09-13 13:37:33,757 - INFO - GPU detection: CUDA GPU available and working
2025-09-13 13:37:33,757 - INFO - Processing mode: GPU sequential (GPU: True, Total models: 1500)
2025-09-13 13:37:33,844 - INFO - GPU detection: CUDA GPU available and working
2025-09-13 13:37:33,856 - INFO - Using expanding window
2025-09-13 13:37:33,857 - INFO - Starting analysis: 150 tiered models x 9 folds
2025-09-13 13:37:33,857 - INFO - Processing Fold 1/9
2025-09-13 13:37:33,868 - INFO -   Using GPU sequential processing
2025-09-13 13:45:39,262 - INFO - Fold 1 Summary:
2025-09-13 13:45:39,262 - INFO -   Best OOS Sharpe: M14 (2.957, p=0.020)
2025-09-13 13:45:39,262 - INFO -   Best Q-Sharpe:  M14 (2.957, OOS_Sharpe=2.957, OOS_Hit=0.538)
2025-09-13 13:45:39,263 - INFO -   Mean OOS Sharpe: 0.878, Mean Hit: 0.511
2025-09-13 13:45:39,263 - INFO - 
2025-09-13 13:45:39,268 - INFO - Processing Fold 2/9
2025-09-13 13:45:39,275 - INFO -   Using GPU sequential processing
2025-09-13 13:55:22,100 - INFO - Fold 2 Summary:
2025-09-13 13:55:22,101 - INFO -   Best OOS Sharpe: M107 (3.011, p=0.000)
2025-09-13 13:55:22,101 - INFO -   Best Q-Sharpe:  M14 (2.854, OOS_Sharpe=1.923, OOS_Hit=0.535)
2025-09-13 13:55:22,101 - INFO -   Mean OOS Sharpe: 1.028, Mean Hit: 0.545
2025-09-13 13:55:22,101 - INFO - 
2025-09-13 13:55:22,105 - INFO - Processing Fold 3/9
2025-09-13 13:55:22,113 - INFO -   Using GPU sequential processing
2025-09-13 14:05:57,280 - INFO - Fold 3 Summary:
2025-09-13 14:05:57,280 - INFO -   Best OOS Sharpe: M20 (2.159, p=0.020)
2025-09-13 14:05:57,280 - INFO -   Best Q-Sharpe:  M14 (2.599, OOS_Sharpe=0.301, OOS_Hit=0.495)
2025-09-13 14:05:57,280 - INFO -   Mean OOS Sharpe: -0.142, Mean Hit: 0.499
2025-09-13 14:05:57,280 - INFO - 
2025-09-13 14:05:57,284 - INFO - Processing Fold 4/9
2025-09-13 14:05:57,296 - INFO -   Using GPU sequential processing
2025-09-13 14:17:20,758 - INFO - Fold 4 Summary:
2025-09-13 14:17:20,758 - INFO -   Best OOS Sharpe: M23 (3.693, p=0.000)
2025-09-13 14:17:20,758 - INFO -   Best Q-Sharpe:  M14 (2.527, OOS_Sharpe=1.877, OOS_Hit=0.553)
2025-09-13 14:17:20,758 - INFO -   Mean OOS Sharpe: 1.694, Mean Hit: 0.541
2025-09-13 14:17:20,758 - INFO - 
2025-09-13 14:17:20,762 - INFO - Processing Fold 5/9
2025-09-13 14:17:20,772 - INFO -   Using GPU sequential processing
2025-09-13 14:29:28,168 - INFO - Fold 5 Summary:
2025-09-13 14:29:28,168 - INFO -   Best OOS Sharpe: M19 (2.013, p=0.020)
2025-09-13 14:29:28,168 - INFO -   Best Q-Sharpe:  M14 (2.328, OOS_Sharpe=0.536, OOS_Hit=0.520)
2025-09-13 14:29:28,168 - INFO -   Mean OOS Sharpe: -0.147, Mean Hit: 0.491
2025-09-13 14:29:28,168 - INFO - 
2025-09-13 14:29:28,173 - INFO - Processing Fold 6/9
2025-09-13 14:29:28,182 - INFO -   Using GPU sequential processing
2025-09-13 14:41:53,703 - INFO - Fold 6 Summary:
2025-09-13 14:41:53,703 - INFO -   Best OOS Sharpe: M106 (2.411, p=0.020)
2025-09-13 14:41:53,703 - INFO -   Best Q-Sharpe:  M14 (2.231, OOS_Sharpe=1.365, OOS_Hit=0.535)
2025-09-13 14:41:53,703 - INFO -   Mean OOS Sharpe: 1.003, Mean Hit: 0.518
2025-09-13 14:41:53,703 - INFO - 
2025-09-13 14:41:53,717 - INFO - Processing Fold 7/9
2025-09-13 14:41:53,726 - INFO -   Using GPU sequential processing
2025-09-13 14:54:41,653 - INFO - Fold 7 Summary:
2025-09-13 14:54:41,653 - INFO -   Best OOS Sharpe: M88 (2.117, p=0.020)
2025-09-13 14:54:41,653 - INFO -   Best Q-Sharpe:  M14 (2.101, OOS_Sharpe=0.924, OOS_Hit=0.502)
2025-09-13 14:54:41,653 - INFO -   Mean OOS Sharpe: 0.806, Mean Hit: 0.517
2025-09-13 14:54:41,653 - INFO - 
2025-09-13 14:54:41,658 - INFO - Processing Fold 8/9
2025-09-13 14:54:41,668 - INFO -   Using GPU sequential processing
2025-09-13 15:07:48,802 - INFO - Fold 8 Summary:
2025-09-13 15:07:48,802 - INFO -   Best OOS Sharpe: M34 (3.946, p=0.000)
2025-09-13 15:07:48,802 - INFO -   Best Q-Sharpe:  M95 (2.050, OOS_Sharpe=2.607, OOS_Hit=0.557)
2025-09-13 15:07:48,802 - INFO -   Mean OOS Sharpe: 2.216, Mean Hit: 0.544
2025-09-13 15:07:48,802 - INFO - 
2025-09-13 15:07:48,806 - INFO - Processing Fold 9/9
2025-09-13 15:07:48,814 - INFO -   Using GPU sequential processing
2025-09-13 15:19:15,833 - INFO - Fold 9 Summary:
2025-09-13 15:19:15,834 - INFO -   Best OOS Sharpe: M99 (3.149, p=0.000)
2025-09-13 15:19:15,834 - INFO -   Best Q-Sharpe:  M95 (1.996, OOS_Sharpe=1.502, OOS_Hit=0.540)
2025-09-13 15:19:15,834 - INFO -   Mean OOS Sharpe: 1.333, Mean Hit: 0.529
2025-09-13 15:19:15,834 - INFO - 
2025-09-13 15:19:15,838 - INFO - Starting full timeline backtesting...
2025-09-13 15:19:15,838 - INFO - Running full timeline backtest with 9 folds (0-based indexing)
2025-09-13 15:19:15,838 - INFO - Fold 0 skipped (no prior Q-score history for meaningful selection)
2025-09-13 15:19:15,838 - INFO - Effective backtest period: Folds 1-8 (8 folds)
2025-09-13 15:19:15,838 - INFO - Training period: Folds 1-5
2025-09-13 15:19:15,838 - INFO - Production period: Folds 6-8
2025-09-13 15:19:15,838 - INFO - Using consistent OOS methodology for all folds
2025-09-13 15:19:15,839 - INFO - Fold 0: Skipped (no prior Q-score history for meaningful selection)
2025-09-13 15:19:15,839 - INFO - 
--- Processing fold 1/8 ---
2025-09-13 15:19:15,865 - INFO - Fold 1: Q-scores from fold 0: ['M00:0.338', 'M01:0.603', 'M02:0.945', 'M03:0.113', 'M04:0.977']...
2025-09-13 15:19:15,866 - INFO - Fold 1: Selected models [14, 133, 95, 48, 34, 143, 66, 116] based on fold 0 Q-scores, avg Q-score: 2.493
2025-09-13 15:19:15,867 - INFO - Fold 1 (Training): Sharpe=1.636, Hit=57.9%
2025-09-13 15:19:15,867 - INFO - 
--- Processing fold 2/8 ---
2025-09-13 15:19:15,901 - INFO - Fold 2: Q-scores from fold 1: ['M00:0.486', 'M01:0.517', 'M02:0.979', 'M03:0.181', 'M04:1.030']...
2025-09-13 15:19:15,901 - INFO - Fold 2: Selected models [14, 133, 95, 48, 66, 34, 143, 116] based on fold 1 Q-scores, avg Q-score: 2.368
2025-09-13 15:19:15,903 - INFO - Fold 2 (Training): Sharpe=-0.040, Hit=50.5%
2025-09-13 15:19:15,903 - INFO - 
--- Processing fold 3/8 ---
2025-09-13 15:19:15,938 - INFO - Fold 3: Q-scores from fold 2: ['M00:0.447', 'M01:0.512', 'M02:0.840', 'M03:0.078', 'M04:0.874']...
2025-09-13 15:19:15,938 - INFO - Fold 3: Selected models [14, 133, 95, 48, 66, 143, 34, 5] based on fold 2 Q-scores, avg Q-score: 2.147
2025-09-13 15:19:15,940 - INFO - Fold 3 (Training): Sharpe=2.317, Hit=55.3%
2025-09-13 15:19:15,940 - INFO - 
--- Processing fold 4/8 ---
2025-09-13 15:19:15,971 - INFO - Fold 4: Q-scores from fold 3: ['M00:0.596', 'M01:0.672', 'M02:0.857', 'M03:0.190', 'M04:1.137']...
2025-09-13 15:19:15,972 - INFO - Fold 4: Selected models [14, 95, 133, 48, 66, 34, 5, 118] based on fold 3 Q-scores, avg Q-score: 2.107
2025-09-13 15:19:15,973 - INFO - Fold 4 (Training): Sharpe=0.610, Hit=49.5%
2025-09-13 15:19:15,973 - INFO - 
--- Processing fold 5/8 ---
2025-09-13 15:19:16,001 - INFO - Fold 5: Q-scores from fold 4: ['M00:0.532', 'M01:0.591', 'M02:0.816', 'M03:0.277', 'M04:1.021']...
2025-09-13 15:19:16,001 - INFO - Fold 5: Selected models [14, 95, 133, 48, 66, 5, 118, 34] based on fold 4 Q-scores, avg Q-score: 1.943
2025-09-13 15:19:16,002 - INFO - Fold 5 (Training): Sharpe=1.368, Hit=53.8%
2025-09-13 15:19:16,002 - INFO - 
--- Processing fold 6/8 ---
2025-09-13 15:19:16,041 - INFO - Fold 6: Q-scores from fold 5: ['M00:0.571', 'M01:0.564', 'M02:0.847', 'M03:0.293', 'M04:1.112']...
2025-09-13 15:19:16,041 - INFO - Fold 6: Selected models [14, 95, 48, 133, 34, 66, 5, 143] based on fold 5 Q-scores, avg Q-score: 1.867
2025-09-13 15:19:16,043 - INFO - Fold 6 (Production): Sharpe=0.906, Hit=53.1%
2025-09-13 15:19:16,043 - INFO - 
--- Processing fold 7/8 ---
2025-09-13 15:19:16,080 - INFO - Fold 7: Q-scores from fold 6: ['M00:0.594', 'M01:0.598', 'M02:0.833', 'M03:0.409', 'M04:1.095']...
2025-09-13 15:19:16,080 - INFO - Fold 7: Selected models [14, 95, 48, 133, 34, 5, 143, 66] based on fold 6 Q-scores, avg Q-score: 1.754
2025-09-13 15:19:16,082 - INFO - Fold 7 (Production): Sharpe=3.058, Hit=57.9%
2025-09-13 15:19:16,082 - INFO - 
--- Processing fold 8/8 ---
2025-09-13 15:19:16,126 - INFO - Fold 8: Q-scores from fold 7: ['M00:0.685', 'M01:0.762', 'M02:1.116', 'M03:0.589', 'M04:1.281']...
2025-09-13 15:19:16,126 - INFO - Fold 8: Selected models [95, 14, 48, 133, 34, 5, 134, 20] based on fold 7 Q-scores, avg Q-score: 1.817
2025-09-13 15:19:16,131 - INFO - Fold 8 (Production): Sharpe=2.208, Hit=53.3%
2025-09-13 15:19:16,135 - INFO - Training Period Overall: Sharpe=1.277, Hit=53.4%
2025-09-13 15:19:16,136 - INFO - Production Period Overall: Sharpe=1.831, Hit=54.8%
2025-09-13 15:19:16,138 - INFO - Full Timeline Overall: Sharpe=1.508, Hit=53.9%
2025-09-13 15:19:16,138 - INFO - Training: Sharpe=1.277 | Hit=53.4% | Return=2.76%
2025-09-13 15:19:16,138 - INFO - Production: Sharpe=1.831 | Hit=54.8% | Return=6.03%
2025-09-13 15:19:16,138 - INFO - Full Timeline: Sharpe=1.508 | Hit=53.9% | Return=3.98%
2025-09-13 15:19:16,138 - INFO - Generating visualizations...
2025-09-13 15:19:16,138 - INFO - Creating clean visualizations for 150 models...
2025-09-13 15:19:18,839 - INFO - Clean fold-by-fold analysis saved to: 20250913_133659_fold_@TY#C_150models_10folds_v2_S5.3_TY_optimal_150M.png
2025-09-13 15:19:21,579 - INFO - Detailed production analysis saved to: 20250913_133659_backtest_@TY#C_150models_10folds_v2_S5.3_TY_optimal_150M.png
2025-09-13 15:19:21,579 - INFO - ================================================================================
2025-09-13 15:19:21,579 - INFO - BACKTEST SUMMARY
2025-09-13 15:19:21,579 - INFO - ================================================================================
2025-09-13 15:19:21,579 - INFO - Config: Cutoff=70%, Top N=5, Q-Metric=sharpe, Reselection=1 fold(s)
2025-09-13 15:19:21,579 - INFO - Model Selection History:
2025-09-13 15:19:21,579 - INFO -   Fold 1: M14, M133, M95, M48, M34, M143, M66, M116 (Avg Q-sharpe: 2.493)
2025-09-13 15:19:21,579 - INFO -   Fold 2: M14, M133, M95, M48, M66, M34, M143, M116 (Avg Q-sharpe: 2.368)
2025-09-13 15:19:21,579 - INFO -   Fold 3: M14, M133, M95, M48, M66, M143, M34, M05 (Avg Q-sharpe: 2.147)
2025-09-13 15:19:21,579 - INFO -   Fold 4: M14, M95, M133, M48, M66, M34, M05, M118 (Avg Q-sharpe: 2.107)
2025-09-13 15:19:21,579 - INFO -   Fold 5: M14, M95, M133, M48, M66, M05, M118, M34 (Avg Q-sharpe: 1.943)
2025-09-13 15:19:21,579 - INFO -   Fold 6: M14, M95, M48, M133, M34, M66, M05, M143 (Avg Q-sharpe: 1.867)
2025-09-13 15:19:21,579 - INFO -   Fold 7: M14, M95, M48, M133, M34, M05, M143, M66 (Avg Q-sharpe: 1.754)
2025-09-13 15:19:21,580 - INFO -   Fold 8: M95, M14, M48, M133, M34, M05, M134, M20 (Avg Q-sharpe: 1.817)
2025-09-13 15:19:21,580 - INFO - 
2025-09-13 15:19:21,580 - INFO - Fold-by-Fold Performance:
2025-09-13 15:19:21,580 - INFO -   Fold 1: M14, M133, M95, M48, M34, M143, M66, M116 | Sharpe=1.636 | Hit=57.9% | Samples=273
2025-09-13 15:19:21,580 - INFO -   Fold 2: M14, M133, M95, M48, M66, M34, M143, M116 | Sharpe=-0.040 | Hit=50.5% | Samples=273
2025-09-13 15:19:21,580 - INFO -   Fold 3: M14, M133, M95, M48, M66, M143, M34, M05 | Sharpe=2.317 | Hit=55.3% | Samples=273
2025-09-13 15:19:21,580 - INFO -   Fold 4: M14, M95, M133, M48, M66, M34, M05, M118 | Sharpe=0.610 | Hit=49.5% | Samples=273
2025-09-13 15:19:21,580 - INFO -   Fold 5: M14, M95, M133, M48, M66, M05, M118, M34 | Sharpe=1.368 | Hit=53.8% | Samples=273
2025-09-13 15:19:21,580 - INFO -   Fold 6: M14, M95, M48, M133, M34, M66, M05, M143 | Sharpe=0.906 | Hit=53.1% | Samples=273
2025-09-13 15:19:21,580 - INFO -   Fold 7: M14, M95, M48, M133, M34, M05, M143, M66 | Sharpe=3.058 | Hit=57.9% | Samples=273
2025-09-13 15:19:21,580 - INFO -   Fold 8: M95, M14, M48, M133, M34, M05, M134, M20 | Sharpe=2.208 | Hit=53.3% | Samples=274
2025-09-13 15:19:21,580 - INFO - ================================================================================
2025-09-13 15:19:21,580 - INFO - ================================================================================
2025-09-13 15:19:21,580 - INFO - ANALYSIS COMPLETED SUCCESSFULLY!
2025-09-13 15:19:21,580 - INFO - ================================================================================
2025-09-13 15:19:21,580 - INFO - Generated 2 visualization files
2025-09-13 15:19:21,580 - INFO -   - 20250913_133659_fold_@TY#C_150models_10folds_v2_S5.3_TY_optimal_150M.png
2025-09-13 15:19:21,580 - INFO -   - 20250913_133659_backtest_@TY#C_150models_10folds_v2_S5.3_TY_optimal_150M.png
2025-09-13 15:19:21,580 - INFO - Training Final: Sharpe=1.277 | Hit=53.4% | Return=2.76% | CB=0.938
2025-09-13 15:19:21,580 - INFO - Production Final: Sharpe=1.831 | Hit=54.8% | Return=6.03% | CB=2.002
2025-09-13 15:19:21,580 - INFO - Full Timeline Final: Sharpe=1.508 | Hit=53.9% | Return=3.98% | CB=1.323
