2025-09-09 10:30:34,019 - INFO - ================================================================================
2025-09-09 10:30:34,019 - INFO - XGBoost Comparison Framework
2025-09-09 10:30:34,019 - INFO - ================================================================================
2025-09-09 10:30:34,019 - INFO - Configuration:
2025-09-09 10:30:34,019 - INFO -   Target Symbol: @ES#C
2025-09-09 10:30:34,019 - INFO -   Date Range: 2021-01-01 to 2024-01-01
2025-09-09 10:30:34,019 - INFO -   Models: 20, Type: standard
2025-09-09 10:30:34,019 - INFO -   Folds: 5
2025-09-09 10:30:34,019 - INFO -   Max Features: -1 (All after cluster reduction)
2025-09-09 10:30:34,019 - INFO -   Feature Selection: Enabled
2025-09-09 10:30:34,019 - INFO -   Inner Val Fraction: 0.2
2025-09-09 10:30:34,019 - INFO -   EWMA Alpha: 0.1, Quality Halflife: 63 days
2025-09-09 10:30:34,019 - INFO -   Signal Type: Tanh Normalized
2025-09-09 10:30:34,019 - INFO -   Production: Cutoff=0.7, Top N=2, Q-Metric=sharpe
2025-09-09 10:30:34,019 - INFO -   Reselection: Every 1 fold(s)
2025-09-09 10:30:34,019 - INFO - 
2025-09-09 10:30:35,654 - WARNING - Found 22 NaN values in feature columns after cleaning
2025-09-09 10:30:35,677 - INFO - Loaded: (775, 1054)
2025-09-09 10:30:44,811 - INFO - Selected 385 features (threshold: 0.7)
2025-09-09 10:30:44,816 - INFO - Features: 385
2025-09-09 10:30:45,350 - INFO - GPU detection: CUDA GPU available
2025-09-09 10:30:45,492 - INFO - ============================================================
2025-09-09 10:30:45,492 - INFO - Cross-Validation: 20 standard models x 3 folds
2025-09-09 10:30:45,492 - INFO - Processing: GPU Sequential
2025-09-09 10:30:45,492 - INFO - ============================================================
2025-09-09 10:30:45,492 - INFO - 
Fold 1/3
2025-09-09 10:31:01,887 - INFO -   Mean OOS Sharpe: 2.036
2025-09-09 10:31:01,887 - INFO - 
Fold 2/3
2025-09-09 10:31:17,080 - INFO -   Mean OOS Sharpe: 0.009
2025-09-09 10:31:17,080 - INFO - 
Fold 3/3
2025-09-09 10:31:28,342 - INFO -   Mean OOS Sharpe: 0.006
2025-09-09 10:31:28,342 - INFO - 
Calculating Q-Scores...
2025-09-09 10:31:28,354 - INFO - 
Completed in 43.5s (0.7 min)
2025-09-09 10:31:28,354 - INFO - Time per fold: 14.5s
2025-09-09 10:31:28,354 - INFO - 
============================================================
2025-09-09 10:31:28,354 - INFO - Starting Production Backtesting...
2025-09-09 10:31:28,354 - INFO - ============================================================
2025-09-09 10:31:28,354 - INFO - Running full timeline backtest with 3 folds (starting from fold 2)
2025-09-09 10:31:28,354 - INFO - Fold 1 skipped (no Q-score history for meaningful selection)
2025-09-09 10:31:28,355 - INFO - Effective backtest period: Folds 2-3 (2 folds)
2025-09-09 10:31:28,355 - INFO - Training period: Folds 2-2
2025-09-09 10:31:28,355 - INFO - Production period: Folds 3-3
2025-09-09 10:31:28,355 - INFO - Using same OOS methodology for both periods
2025-09-09 10:31:28,355 - INFO - Fold 1: Skipped (no Q-score history for meaningful selection)
2025-09-09 10:31:28,355 - INFO - Processing fold 2/3
2025-09-09 10:31:28,355 - INFO - Fold 2: First meaningful selection from fold 0, models [0, 1], avg Q-score: 0.000
2025-09-09 10:31:29,615 - INFO - Fold 2 (Training): Sharpe=0.560, Hit=51.0%
2025-09-09 10:31:29,615 - INFO - Processing fold 3/3
2025-09-09 10:31:29,623 - INFO - Fold 3: Selected from fold 1, models [1, 11], avg Q-score: 2.873
2025-09-09 10:31:30,320 - INFO - Fold 3 (Production): Sharpe=-0.256, Hit=43.2%
2025-09-09 10:31:30,322 - INFO - Training Period Overall: Sharpe=0.517, Hit=53.5%
2025-09-09 10:31:30,325 - INFO - Production Period Overall: Sharpe=1.313, Hit=54.2%
2025-09-09 10:31:30,327 - INFO - Full Timeline Overall: Sharpe=0.817, Hit=53.9%
2025-09-09 10:31:30,327 - INFO - 
Backtest Results:
2025-09-09 10:31:30,328 - INFO -   Training    : Sharpe=0.517 | Hit=53.5% | Return=3.27%
2025-09-09 10:31:30,328 - INFO -   Production  : Sharpe=1.313 | Hit=54.2% | Return=5.47%
2025-09-09 10:31:30,328 - INFO -   Full Timeline: Sharpe=0.817 | Hit=53.9% | Return=4.37%
2025-09-09 10:31:30,328 - INFO - 
Generating visualizations...
2025-09-09 10:31:30,328 - INFO - Creating visualizations (20 models)...
2025-09-09 10:31:32,098 - INFO - Fold-by-fold analysis saved to: fold_@ES#C_20models_5folds_standard_tanh_debug_test2_20250909_103130.png
2025-09-09 10:31:32,142 - INFO - Using categorical units to plot a list of strings that are all parsable as floats or dates. If these strings should be plotted as numbers, cast to the appropriate data type before plotting.
2025-09-09 10:31:32,142 - INFO - Using categorical units to plot a list of strings that are all parsable as floats or dates. If these strings should be plotted as numbers, cast to the appropriate data type before plotting.
2025-09-09 10:31:32,338 - INFO - Using actual training period PnL (155 days)
2025-09-09 10:31:33,632 - INFO - Backtest analysis saved to: backtest_@ES#C_20models_5folds_standard_tanh_debug_test2_20250909_103130.png
2025-09-09 10:31:33,632 - INFO - ====================================================================================================
2025-09-09 10:31:33,632 - INFO - DETAILED PRODUCTION BACKTEST SUMMARY
2025-09-09 10:31:33,632 - INFO - ====================================================================================================
2025-09-09 10:31:33,632 - INFO - Configuration:
2025-09-09 10:31:33,632 - INFO -   - Cutoff Fraction: 70%
2025-09-09 10:31:33,632 - INFO -   - Top N Models: 5
2025-09-09 10:31:33,632 - INFO -   - Q-Metric: sharpe
2025-09-09 10:31:33,632 - INFO -   - Reselection Frequency: 1 folds
2025-09-09 10:31:33,632 - INFO - 
2025-09-09 10:31:33,632 - INFO - Model Selection History:
2025-09-09 10:31:33,632 - INFO -   Fold 2: M00, M01 (Avg Q-sharpe: 0.000)
2025-09-09 10:31:33,632 - INFO -   Fold 3: M01, M11 (Avg Q-sharpe: 2.873)
2025-09-09 10:31:33,632 - INFO - 
2025-09-09 10:31:33,632 - INFO - Fold-by-Fold Performance:
2025-09-09 10:31:33,632 - INFO -   Fold 2: M00, M01 | Sharpe=0.560 | Hit=51.0% | Samples=155
2025-09-09 10:31:33,632 - INFO -   Fold 3: M01, M11 | Sharpe=-0.256 | Hit=43.2% | Samples=155
2025-09-09 10:31:33,633 - INFO - ====================================================================================================
2025-09-09 10:31:33,633 - INFO - 
============================================================
2025-09-09 10:31:33,633 - INFO - ANALYSIS COMPLETED
2025-09-09 10:31:33,633 - INFO - Generated 2 visualizations
2025-09-09 10:31:33,633 - INFO - ============================================================
2025-09-09 10:31:33,633 - INFO - 
Final: Sharpe=0.817 | Hit=53.9% | Return=4.37%
