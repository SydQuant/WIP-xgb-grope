2025-09-13 13:37:06,001 - INFO - ================================================================================
2025-09-13 13:37:06,001 - INFO - XGBoost Comparison Framework
2025-09-13 13:37:06,001 - INFO - ================================================================================
2025-09-13 13:37:06,001 - INFO - Configuration:
2025-09-13 13:37:06,001 - INFO -   Target Symbol: @TY#C
2025-09-13 13:37:06,001 - INFO -   Date Range: 2015-01-01 to 2025-08-01
2025-09-13 13:37:06,001 - INFO -   Models: 200, Type: tiered
2025-09-13 13:37:06,001 - INFO -   Folds: 10
2025-09-13 13:37:06,001 - INFO -   Max Features: 250 (Limited)
2025-09-13 13:37:06,002 - INFO -   Feature Selection: Enabled
2025-09-13 13:37:06,002 - INFO -   Inner Val Fraction: 0.2
2025-09-13 13:37:06,002 - INFO -   EWMA Alpha: 0.1, Quality Halflife: 63 days
2025-09-13 13:37:06,002 - INFO -   Signal Type: Tanh Normalized
2025-09-13 13:37:06,002 - INFO -   Cross-validation: Expanding window
2025-09-13 13:37:06,002 - INFO -   Production: Cutoff=0.6, Top N=10, Q-Metric=sharpe
2025-09-13 13:37:06,002 - INFO -   Reselection: Every 1 fold(s)
2025-09-13 13:37:06,002 - INFO - 
2025-09-13 13:37:12,490 - INFO - Dropped 4 rows due to NaN in target column @TY#C_target_return
2025-09-13 13:37:12,782 - INFO - Loaded: X=(2731, 1906), y=(2731,)
2025-09-13 13:37:40,742 - INFO - Selected 250 features (threshold: 0.7)
2025-09-13 13:37:40,757 - INFO - Selected: 250 features
2025-09-13 13:37:41,012 - INFO - GPU detection: CUDA GPU available and working
2025-09-13 13:37:41,012 - INFO - Processing mode: GPU sequential (GPU: True, Total models: 2000)
2025-09-13 13:37:41,139 - INFO - GPU detection: CUDA GPU available and working
2025-09-13 13:37:41,170 - INFO - Using expanding window
2025-09-13 13:37:41,171 - INFO - Starting analysis: 200 tiered models x 9 folds
2025-09-13 13:37:41,171 - INFO - Processing Fold 1/9
2025-09-13 13:37:41,178 - INFO -   Using GPU sequential processing
2025-09-13 13:48:51,841 - INFO - Fold 1 Summary:
2025-09-13 13:48:51,841 - INFO -   Best OOS Sharpe: M63 (3.465, p=0.000)
2025-09-13 13:48:51,841 - INFO -   Best Q-Sharpe:  M63 (3.465, OOS_Sharpe=3.465, OOS_Hit=0.557)
2025-09-13 13:48:51,841 - INFO -   Mean OOS Sharpe: 0.929, Mean Hit: 0.511
2025-09-13 13:48:51,841 - INFO - 
2025-09-13 13:48:51,845 - INFO - Processing Fold 2/9
2025-09-13 13:48:51,852 - INFO -   Using GPU sequential processing
2025-09-13 14:02:04,975 - INFO - Fold 2 Summary:
2025-09-13 14:02:04,975 - INFO -   Best OOS Sharpe: M102 (2.675, p=0.020)
2025-09-13 14:02:04,975 - INFO -   Best Q-Sharpe:  M63 (3.318, OOS_Sharpe=2.000, OOS_Hit=0.593)
2025-09-13 14:02:04,975 - INFO -   Mean OOS Sharpe: 0.979, Mean Hit: 0.542
2025-09-13 14:02:04,975 - INFO - 
2025-09-13 14:02:04,979 - INFO - Processing Fold 3/9
2025-09-13 14:02:04,987 - INFO -   Using GPU sequential processing
2025-09-13 14:16:43,314 - INFO - Fold 3 Summary:
2025-09-13 14:16:43,320 - INFO -   Best OOS Sharpe: M50 (1.723, p=0.100)
2025-09-13 14:16:43,320 - INFO -   Best Q-Sharpe:  M63 (2.880, OOS_Sharpe=-1.058, OOS_Hit=0.473)
2025-09-13 14:16:43,320 - INFO -   Mean OOS Sharpe: -0.195, Mean Hit: 0.497
2025-09-13 14:16:43,320 - INFO - 
2025-09-13 14:16:43,325 - INFO - Processing Fold 4/9
2025-09-13 14:16:43,332 - INFO -   Using GPU sequential processing
2025-09-13 14:32:20,907 - INFO - Fold 4 Summary:
2025-09-13 14:32:20,907 - INFO -   Best OOS Sharpe: M152 (3.733, p=0.000)
2025-09-13 14:32:20,907 - INFO -   Best Q-Sharpe:  M63 (2.825, OOS_Sharpe=2.324, OOS_Hit=0.531)
2025-09-13 14:32:20,907 - INFO -   Mean OOS Sharpe: 1.704, Mean Hit: 0.543
2025-09-13 14:32:20,907 - INFO - 
2025-09-13 14:32:20,911 - INFO - Processing Fold 5/9
2025-09-13 14:32:20,920 - INFO -   Using GPU sequential processing
2025-09-13 14:48:45,335 - INFO - Fold 5 Summary:
2025-09-13 14:48:45,335 - INFO -   Best OOS Sharpe: M107 (1.524, p=0.090)
2025-09-13 14:48:45,335 - INFO -   Best Q-Sharpe:  M63 (2.556, OOS_Sharpe=0.137, OOS_Hit=0.505)
2025-09-13 14:48:45,335 - INFO -   Mean OOS Sharpe: -0.063, Mean Hit: 0.492
2025-09-13 14:48:45,335 - INFO - 
2025-09-13 14:48:45,341 - INFO - Processing Fold 6/9
2025-09-13 14:48:45,349 - INFO -   Using GPU sequential processing
2025-09-13 15:05:39,477 - INFO - Fold 6 Summary:
2025-09-13 15:05:39,477 - INFO -   Best OOS Sharpe: M58 (2.677, p=0.010)
2025-09-13 15:05:39,477 - INFO -   Best Q-Sharpe:  M63 (2.405, OOS_Sharpe=1.049, OOS_Hit=0.535)
2025-09-13 15:05:39,478 - INFO -   Mean OOS Sharpe: 1.033, Mean Hit: 0.519
2025-09-13 15:05:39,478 - INFO - 
2025-09-13 15:05:39,483 - INFO - Processing Fold 7/9
2025-09-13 15:05:39,493 - INFO -   Using GPU sequential processing
2025-09-13 15:20:35,213 - INFO - Fold 7 Summary:
2025-09-13 15:20:35,213 - INFO -   Best OOS Sharpe: M136 (2.136, p=0.060)
2025-09-13 15:20:35,213 - INFO -   Best Q-Sharpe:  M63 (2.229, OOS_Sharpe=0.643, OOS_Hit=0.476)
2025-09-13 15:20:35,213 - INFO -   Mean OOS Sharpe: 0.883, Mean Hit: 0.521
2025-09-13 15:20:35,213 - INFO - 
2025-09-13 15:20:35,220 - INFO - Processing Fold 8/9
2025-09-13 15:20:35,229 - INFO -   Using GPU sequential processing
2025-09-13 15:31:07,490 - INFO - Fold 8 Summary:
2025-09-13 15:31:07,490 - INFO -   Best OOS Sharpe: M89 (3.917, p=0.000)
2025-09-13 15:31:07,490 - INFO -   Best Q-Sharpe:  M63 (2.320, OOS_Sharpe=3.142, OOS_Hit=0.571)
2025-09-13 15:31:07,490 - INFO -   Mean OOS Sharpe: 2.302, Mean Hit: 0.548
2025-09-13 15:31:07,490 - INFO - 
2025-09-13 15:31:07,497 - INFO - Processing Fold 9/9
2025-09-13 15:31:07,506 - INFO -   Using GPU sequential processing
2025-09-13 15:39:50,861 - INFO - Fold 9 Summary:
2025-09-13 15:39:50,861 - INFO -   Best OOS Sharpe: M146 (3.222, p=0.000)
2025-09-13 15:39:50,861 - INFO -   Best Q-Sharpe:  M63 (2.187, OOS_Sharpe=0.986, OOS_Hit=0.518)
2025-09-13 15:39:50,861 - INFO -   Mean OOS Sharpe: 1.145, Mean Hit: 0.525
2025-09-13 15:39:50,861 - INFO - 
2025-09-13 15:39:50,869 - INFO - Starting full timeline backtesting...
2025-09-13 15:39:50,869 - INFO - Running full timeline backtest with 9 folds (0-based indexing)
2025-09-13 15:39:50,869 - INFO - Fold 0 skipped (no prior Q-score history for meaningful selection)
2025-09-13 15:39:50,869 - INFO - Effective backtest period: Folds 1-8 (8 folds)
2025-09-13 15:39:50,869 - INFO - Training period: Folds 1-5
2025-09-13 15:39:50,869 - INFO - Production period: Folds 6-8
2025-09-13 15:39:50,869 - INFO - Using consistent OOS methodology for all folds
2025-09-13 15:39:50,869 - INFO - Fold 0: Skipped (no prior Q-score history for meaningful selection)
2025-09-13 15:39:50,869 - INFO - 
--- Processing fold 1/8 ---
2025-09-13 15:39:50,912 - INFO - Fold 1: Q-scores from fold 0: ['M00:0.530', 'M01:1.696', 'M02:1.248', 'M03:0.653', 'M04:0.213']...
2025-09-13 15:39:50,912 - INFO - Fold 1: Selected models [63, 35, 33, 48, 136, 16, 165, 152, 191, 81] based on fold 0 Q-scores, avg Q-score: 2.257
2025-09-13 15:39:50,914 - INFO - Fold 1 (Training): Sharpe=1.309, Hit=55.7%
2025-09-13 15:39:50,914 - INFO - 
--- Processing fold 2/8 ---
2025-09-13 15:39:50,953 - INFO - Fold 2: Q-scores from fold 1: ['M00:0.587', 'M01:1.590', 'M02:1.201', 'M03:0.704', 'M04:0.367']...
2025-09-13 15:39:50,953 - INFO - Fold 2: Selected models [63, 35, 136, 33, 48, 165, 16, 25, 191, 152] based on fold 1 Q-scores, avg Q-score: 2.148
2025-09-13 15:39:50,954 - INFO - Fold 2 (Training): Sharpe=-0.253, Hit=48.0%
2025-09-13 15:39:50,954 - INFO - 
--- Processing fold 3/8 ---
2025-09-13 15:39:51,000 - INFO - Fold 3: Q-scores from fold 2: ['M00:0.506', 'M01:1.413', 'M02:1.078', 'M03:0.705', 'M04:0.287']...
2025-09-13 15:39:51,001 - INFO - Fold 3: Selected models [63, 165, 136, 33, 35, 48, 16, 191, 39, 152] based on fold 2 Q-scores, avg Q-score: 1.925
2025-09-13 15:39:51,002 - INFO - Fold 3 (Training): Sharpe=2.659, Hit=54.6%
2025-09-13 15:39:51,002 - INFO - 
--- Processing fold 4/8 ---
2025-09-13 15:39:51,041 - INFO - Fold 4: Q-scores from fold 3: ['M00:0.691', 'M01:1.507', 'M02:1.061', 'M03:0.911', 'M04:0.409']...
2025-09-13 15:39:51,041 - INFO - Fold 4: Selected models [63, 33, 35, 152, 165, 136, 48, 16, 39, 191] based on fold 3 Q-scores, avg Q-score: 1.940
2025-09-13 15:39:51,043 - INFO - Fold 4 (Training): Sharpe=0.292, Hit=52.4%
2025-09-13 15:39:51,043 - INFO - 
--- Processing fold 5/8 ---
2025-09-13 15:39:51,085 - INFO - Fold 5: Q-scores from fold 4: ['M00:0.605', 'M01:1.300', 'M02:0.917', 'M03:0.939', 'M04:0.383']...
2025-09-13 15:39:51,085 - INFO - Fold 5: Selected models [63, 35, 33, 16, 152, 48, 165, 191, 136, 39] based on fold 4 Q-scores, avg Q-score: 1.769
2025-09-13 15:39:51,087 - INFO - Fold 5 (Training): Sharpe=1.435, Hit=51.6%
2025-09-13 15:39:51,087 - INFO - 
--- Processing fold 6/8 ---
2025-09-13 15:39:51,131 - INFO - Fold 6: Q-scores from fold 5: ['M00:0.735', 'M01:1.229', 'M02:0.893', 'M03:0.856', 'M04:0.521']...
2025-09-13 15:39:51,131 - INFO - Fold 6: Selected models [63, 35, 33, 152, 165, 16, 48, 191, 142, 39] based on fold 5 Q-scores, avg Q-score: 1.711
2025-09-13 15:39:51,132 - INFO - Fold 6 (Production): Sharpe=1.296, Hit=53.5%
2025-09-13 15:39:51,132 - INFO - 
--- Processing fold 7/8 ---
2025-09-13 15:39:51,172 - INFO - Fold 7: Q-scores from fold 6: ['M00:0.689', 'M01:1.175', 'M02:0.964', 'M03:0.936', 'M04:0.635']...
2025-09-13 15:39:51,173 - INFO - Fold 7: Selected models [63, 35, 33, 152, 165, 16, 136, 48, 191, 184] based on fold 6 Q-scores, avg Q-score: 1.663
2025-09-13 15:39:51,174 - INFO - Fold 7 (Production): Sharpe=3.600, Hit=57.5%
2025-09-13 15:39:51,174 - INFO - 
--- Processing fold 8/8 ---
2025-09-13 15:39:51,215 - INFO - Fold 8: Q-scores from fold 7: ['M00:0.946', 'M01:1.282', 'M02:1.034', 'M03:1.071', 'M04:0.784']...
2025-09-13 15:39:51,216 - INFO - Fold 8: Selected models [63, 35, 152, 16, 33, 136, 142, 191, 165, 10] based on fold 7 Q-scores, avg Q-score: 1.766
2025-09-13 15:39:51,217 - INFO - Fold 8 (Production): Sharpe=1.933, Hit=51.1%
2025-09-13 15:39:51,219 - INFO - Training Period Overall: Sharpe=1.259, Hit=52.5%
2025-09-13 15:39:51,220 - INFO - Production Period Overall: Sharpe=2.067, Hit=54.0%
2025-09-13 15:39:51,221 - INFO - Full Timeline Overall: Sharpe=1.608, Hit=53.0%
2025-09-13 15:39:51,222 - INFO - Training: Sharpe=1.259 | Hit=52.5% | Return=2.73%
2025-09-13 15:39:51,222 - INFO - Production: Sharpe=2.067 | Hit=54.0% | Return=6.93%
2025-09-13 15:39:51,222 - INFO - Full Timeline: Sharpe=1.608 | Hit=53.0% | Return=4.30%
2025-09-13 15:39:51,222 - INFO - Generating visualizations...
2025-09-13 15:39:51,222 - INFO - Creating clean visualizations for 200 models...
2025-09-13 15:39:53,465 - INFO - Clean fold-by-fold analysis saved to: 20250913_133706_fold_@TY#C_200models_10folds_v2_S5.4_TY_optimal_200M.png
2025-09-13 15:39:56,688 - INFO - Detailed production analysis saved to: 20250913_133706_backtest_@TY#C_200models_10folds_v2_S5.4_TY_optimal_200M.png
2025-09-13 15:39:56,688 - INFO - ================================================================================
2025-09-13 15:39:56,688 - INFO - BACKTEST SUMMARY
2025-09-13 15:39:56,688 - INFO - ================================================================================
2025-09-13 15:39:56,688 - INFO - Config: Cutoff=70%, Top N=5, Q-Metric=sharpe, Reselection=1 fold(s)
2025-09-13 15:39:56,688 - INFO - Model Selection History:
2025-09-13 15:39:56,688 - INFO -   Fold 1: M63, M35, M33, M48, M136, M16, M165, M152, M191, M81 (Avg Q-sharpe: 2.257)
2025-09-13 15:39:56,688 - INFO -   Fold 2: M63, M35, M136, M33, M48, M165, M16, M25, M191, M152 (Avg Q-sharpe: 2.148)
2025-09-13 15:39:56,688 - INFO -   Fold 3: M63, M165, M136, M33, M35, M48, M16, M191, M39, M152 (Avg Q-sharpe: 1.925)
2025-09-13 15:39:56,688 - INFO -   Fold 4: M63, M33, M35, M152, M165, M136, M48, M16, M39, M191 (Avg Q-sharpe: 1.940)
2025-09-13 15:39:56,688 - INFO -   Fold 5: M63, M35, M33, M16, M152, M48, M165, M191, M136, M39 (Avg Q-sharpe: 1.769)
2025-09-13 15:39:56,688 - INFO -   Fold 6: M63, M35, M33, M152, M165, M16, M48, M191, M142, M39 (Avg Q-sharpe: 1.711)
2025-09-13 15:39:56,688 - INFO -   Fold 7: M63, M35, M33, M152, M165, M16, M136, M48, M191, M184 (Avg Q-sharpe: 1.663)
2025-09-13 15:39:56,688 - INFO -   Fold 8: M63, M35, M152, M16, M33, M136, M142, M191, M165, M10 (Avg Q-sharpe: 1.766)
2025-09-13 15:39:56,688 - INFO - 
2025-09-13 15:39:56,688 - INFO - Fold-by-Fold Performance:
2025-09-13 15:39:56,688 - INFO -   Fold 1: M63, M35, M33, M48, M136, M16, M165, M152, M191, M81 | Sharpe=1.309 | Hit=55.7% | Samples=273
2025-09-13 15:39:56,688 - INFO -   Fold 2: M63, M35, M136, M33, M48, M165, M16, M25, M191, M152 | Sharpe=-0.253 | Hit=48.0% | Samples=273
2025-09-13 15:39:56,688 - INFO -   Fold 3: M63, M165, M136, M33, M35, M48, M16, M191, M39, M152 | Sharpe=2.659 | Hit=54.6% | Samples=273
2025-09-13 15:39:56,688 - INFO -   Fold 4: M63, M33, M35, M152, M165, M136, M48, M16, M39, M191 | Sharpe=0.292 | Hit=52.4% | Samples=273
2025-09-13 15:39:56,689 - INFO -   Fold 5: M63, M35, M33, M16, M152, M48, M165, M191, M136, M39 | Sharpe=1.435 | Hit=51.6% | Samples=273
2025-09-13 15:39:56,689 - INFO -   Fold 6: M63, M35, M33, M152, M165, M16, M48, M191, M142, M39 | Sharpe=1.296 | Hit=53.5% | Samples=273
2025-09-13 15:39:56,689 - INFO -   Fold 7: M63, M35, M33, M152, M165, M16, M136, M48, M191, M184 | Sharpe=3.600 | Hit=57.5% | Samples=273
2025-09-13 15:39:56,689 - INFO -   Fold 8: M63, M35, M152, M16, M33, M136, M142, M191, M165, M10 | Sharpe=1.933 | Hit=51.1% | Samples=274
2025-09-13 15:39:56,689 - INFO - ================================================================================
2025-09-13 15:39:56,689 - INFO - ================================================================================
2025-09-13 15:39:56,689 - INFO - ANALYSIS COMPLETED SUCCESSFULLY!
2025-09-13 15:39:56,689 - INFO - ================================================================================
2025-09-13 15:39:56,689 - INFO - Generated 2 visualization files
2025-09-13 15:39:56,689 - INFO -   - 20250913_133706_fold_@TY#C_200models_10folds_v2_S5.4_TY_optimal_200M.png
2025-09-13 15:39:56,689 - INFO -   - 20250913_133706_backtest_@TY#C_200models_10folds_v2_S5.4_TY_optimal_200M.png
2025-09-13 15:39:56,689 - INFO - Training Final: Sharpe=1.259 | Hit=52.5% | Return=2.73% | CB=1.016
2025-09-13 15:39:56,689 - INFO - Production Final: Sharpe=2.067 | Hit=54.0% | Return=6.93% | CB=3.410
2025-09-13 15:39:56,689 - INFO - Full Timeline Final: Sharpe=1.608 | Hit=53.0% | Return=4.30% | CB=1.602
